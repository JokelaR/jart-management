(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const $t=!1;var ht=Array.isArray,tr=Array.prototype.indexOf,jt=Array.from,nr=Object.defineProperty,Le=Object.getOwnPropertyDescriptor,rr=Object.getOwnPropertyDescriptors,mn=Object.prototype,ir=Array.prototype,Bt=Object.getPrototypeOf,en=Object.isExtensible;function or(e){return typeof(e==null?void 0:e.then)=="function"}function yn(e){for(var t=0;t<e.length;t++)e[t]()}const ie=2,bn=4,gt=8,Vt=16,ue=32,qe=64,ot=128,J=256,at=512,G=1024,fe=2048,Me=4096,le=8192,mt=16384,ar=32768,Ht=65536,sr=1<<19,wn=1<<20,At=1<<21,Ee=Symbol("$state"),lr=Symbol("legacy props"),ur=Symbol("");function kn(e){return e===this.v}function fr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Wt(e){return!fr(e,this.v)}function cr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function dr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vr(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _r(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function pr(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function hr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function gr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let yr=!1;const Xt=1,Yt=2,En=4,br=8,wr=16,kr=1,Er=4,Tr=8,Cr=16,Sr=1,xr=2,U=Symbol(),Or="http://www.w3.org/1999/xhtml",Rr=[];function Nr(e,t=!1){return nt(e,new Map,"",Rr)}function nt(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ht(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var l=0;l<e.length;l+=1){var d=e[l];l in e&&(a[l]=nt(d,t,n,r))}return a}if(Bt(e)===mn){a={},t.set(e,a),i!==null&&t.set(i,a);for(var s in e)a[s]=nt(e[s],t,n,r);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return nt(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function Fr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let V=null;function st(e){V=e}function Ye(e,t=!1,n){var r=V={p:V,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Pn(()=>{r.d=!0})}function ze(e){const t=V;if(t!==null){const a=t.e;if(a!==null){var n=L,r=O;t.e=null;try{for(var i=0;i<a.length;i++){var o=a[i];oe(o.effect),Z(o.reaction),Ge(o.fn)}}finally{oe(n),Z(r)}}V=t.p,t.m=!0}return{}}function Tn(){return!0}function z(e,t){if(typeof e!="object"||e===null||Ee in e)return e;const n=Bt(e);if(n!==mn&&n!==ir)return e;var r=new Map,i=ht(e),o=D(0),a=O,l=d=>{var s=O;Z(a);var c;return c=d(),Z(s),c};return i&&r.set("length",D(e.length)),new Proxy(e,{defineProperty(d,s,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&hr();var v=r.get(s);return v===void 0?(v=l(()=>D(c.value)),r.set(s,v)):C(v,l(()=>z(c.value))),!0},deleteProperty(d,s){var c=r.get(s);if(c===void 0)s in d&&r.set(s,l(()=>D(U)));else{if(i&&typeof s=="string"){var v=r.get("length"),u=Number(s);Number.isInteger(u)&&u<v.v&&C(v,u)}C(c,U),tn(o)}return!0},get(d,s,c){var p;if(s===Ee)return e;var v=r.get(s),u=s in d;if(v===void 0&&(!u||(p=Le(d,s))!=null&&p.writable)&&(v=l(()=>D(z(u?d[s]:U))),r.set(s,v)),v!==void 0){var _=f(v);return _===U?void 0:_}return Reflect.get(d,s,c)},getOwnPropertyDescriptor(d,s){var c=Reflect.getOwnPropertyDescriptor(d,s);if(c&&"value"in c){var v=r.get(s);v&&(c.value=f(v))}else if(c===void 0){var u=r.get(s),_=u==null?void 0:u.v;if(u!==void 0&&_!==U)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return c},has(d,s){var _;if(s===Ee)return!0;var c=r.get(s),v=c!==void 0&&c.v!==U||Reflect.has(d,s);if(c!==void 0||L!==null&&(!v||(_=Le(d,s))!=null&&_.writable)){c===void 0&&(c=l(()=>D(v?z(d[s]):U)),r.set(s,c));var u=f(c);if(u===U)return!1}return v},set(d,s,c,v){var y;var u=r.get(s),_=s in d;if(i&&s==="length")for(var p=c;p<u.v;p+=1){var S=r.get(p+"");S!==void 0?C(S,U):p in d&&(S=l(()=>D(U)),r.set(p+"",S))}u===void 0?(!_||(y=Le(d,s))!=null&&y.writable)&&(u=l(()=>D(void 0)),C(u,l(()=>z(c))),r.set(s,u)):(_=u.v!==U,C(u,l(()=>z(c))));var b=Reflect.getOwnPropertyDescriptor(d,s);if(b!=null&&b.set&&b.set.call(v,c),!_){if(i&&typeof s=="string"){var x=r.get("length"),g=Number(s);Number.isInteger(g)&&g>=x.v&&C(x,g+1)}tn(o)}return!0},ownKeys(d){f(o);var s=Reflect.ownKeys(d).filter(u=>{var _=r.get(u);return _===void 0||_.v!==U});for(var[c,v]of r)v.v!==U&&!(c in d)&&s.push(c);return s},setPrototypeOf(){gr()}})}function tn(e,t=1){C(e,e.v+t)}function nn(e){try{if(e!==null&&typeof e=="object"&&Ee in e)return e[Ee]}catch{}return e}function Lr(e,t){return Object.is(nn(e),nn(t))}const We=new Map;function Ae(e,t){var n={f:0,v:e,reactions:null,equals:kn,rv:0,wv:0};return n}function D(e,t){const n=Ae(e);return jn(n),n}function Cn(e,t=!1){const n=Ae(e);return t||(n.equals=Wt),n}function C(e,t,n=!1){O!==null&&!re&&Tn()&&(O.f&(ie|Vt))!==0&&!(H!=null&&H.includes(e))&&mr();let r=n?z(t):t;return Pe(e,r)}function Pe(e,t){if(!e.equals(t)){var n=e.v;Ke?We.set(e,t):We.set(e,n),e.v=t,e.wv=Vn(),Sn(e,fe),L!==null&&(L.f&G)!==0&&(L.f&(ue|qe))===0&&(K===null?Yr([e]):K.push(e))}return t}function Sn(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var o=n[i],a=o.f;(a&fe)===0&&(ae(o,t),(a&(G|J))!==0&&((a&ie)!==0?Sn(o,Me):Tt(o)))}}let Pr=!1;var rn,xn,On,Rn;function Ar(){if(rn===void 0){rn=window,xn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;On=Le(t,"firstChild").get,Rn=Le(t,"nextSibling").get,en(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),en(n)&&(n.__t=void 0)}}function zt(e=""){return document.createTextNode(e)}function lt(e){return On.call(e)}function yt(e){return Rn.call(e)}function E(e,t){return lt(e)}function Nn(e,t){{var n=lt(e);return n instanceof Comment&&n.data===""?yt(n):n}}function w(e,t=1,n=!1){let r=e;for(;t--;)r=yt(r);return r}function Dr(e){e.textContent=""}function bt(e){var t=ie|fe,n=O!==null&&(O.f&ie)!==0?O:null;return L===null||n!==null&&(n.f&J)!==0?t|=J:L.f|=wn,{ctx:V,deps:null,effects:null,equals:kn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??L}}function Gt(e){const t=bt(e);return jn(t),t}function Ir(e){const t=bt(e);return t.equals=Wt,t}function Fn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)me(t[n])}}function qr(e){for(var t=e.parent;t!==null;){if((t.f&ie)===0)return t;t=t.parent}return null}function Mr(e){var t,n=L;oe(qr(e));try{Fn(e),t=Wn(e)}finally{oe(n)}return t}function Ln(e){var t=Mr(e),n=(he||(e.f&J)!==0)&&e.deps!==null?Me:G;ae(e,n),e.equals(t)||(e.v=t,e.wv=Vn())}function Ur(e){L===null&&O===null&&vr(),O!==null&&(O.f&J)!==0&&L===null&&dr(),Ke&&cr()}function jr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ue(e,t,n,r=!0){var i=L,o={ctx:V,deps:null,nodes_start:null,nodes_end:null,f:e|fe,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{Zt(o),o.f|=ar}catch(d){throw me(o),d}else t!==null&&Tt(o);var a=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(wn|ot))===0;if(!a&&r&&(i!==null&&jr(o,i),O!==null&&(O.f&ie)!==0)){var l=O;(l.effects??(l.effects=[])).push(o)}return o}function Pn(e){const t=Ue(gt,null,!1);return ae(t,G),t.teardown=e,t}function Br(e){Ur();var t=L!==null&&(L.f&ue)!==0&&V!==null&&!V.m;if(t){var n=V;(n.e??(n.e=[])).push({fn:e,effect:L,reaction:O})}else{var r=Ge(e);return r}}function Vr(e){const t=Ue(qe,e,!0);return(n={})=>new Promise(r=>{n.outro?Te(t,()=>{me(t),r(void 0)}):(me(t),r(void 0))})}function Ge(e){return Ue(bn,e,!1)}function Kt(e){return Ue(gt,e,!0)}function ee(e,t=[],n=bt){const r=t.map(n);return wt(()=>e(...r.map(f)))}function wt(e,t=0){return Ue(gt|Vt|t,e,!0)}function ge(e,t=!0){return Ue(gt|ue,e,!0,t)}function An(e){var t=e.teardown;if(t!==null){const n=Ke,r=O;an(!0),Z(null);try{t.call(null)}finally{an(n),Z(r)}}}function Dn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&qe)!==0?n.parent=null:me(n,t),n=r}}function Hr(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ue)===0&&me(t),t=n}}function me(e,t=!0){var n=!1;if((t||(e.f&sr)!==0)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var o=r===i?null:yt(r);r.remove(),r=o}n=!0}Dn(e,t&&!n),dt(e,0),ae(e,mt);var a=e.transitions;if(a!==null)for(const d of a)d.stop();An(e);var l=e.parent;l!==null&&l.first!==null&&In(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function In(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Te(e,t){var n=[];Jt(e,n,!0),qn(n,()=>{me(e),t&&t()})}function qn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Jt(e,t,n){if((e.f&le)===0){if(e.f^=le,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&Ht)!==0||(r.f&ue)!==0;Jt(r,t,o?n:!1),r=i}}}function Ce(e){Mn(e,!0)}function Mn(e,t){if((e.f&le)!==0){e.f^=le,(e.f&G)===0&&(e.f^=G),Je(e)&&(ae(e,fe),Tt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Ht)!==0||(n.f&ue)!==0;Mn(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Xe=[],Dt=[];function Un(){var e=Xe;Xe=[],yn(e)}function Wr(){var e=Dt;Dt=[],yn(e)}function kt(e){Xe.length===0&&queueMicrotask(Un),Xe.push(e)}function on(){Xe.length>0&&Un(),Dt.length>0&&Wr()}let rt=!1,ut=!1,ft=null,Se=!1,Ke=!1;function an(e){Ke=e}let Ve=[];let O=null,re=!1;function Z(e){O=e}let L=null;function oe(e){L=e}let H=null;function Xr(e){H=e}function jn(e){O!==null&&O.f&At&&(H===null?Xr([e]):H.push(e))}let B=null,Y=0,K=null;function Yr(e){K=e}let Bn=1,ct=0,he=!1;function Vn(){return++Bn}function Je(e){var v;var t=e.f;if((t&fe)!==0)return!0;if((t&Me)!==0){var n=e.deps,r=(t&J)!==0;if(n!==null){var i,o,a=(t&at)!==0,l=r&&L!==null&&!he,d=n.length;if(a||l){var s=e,c=s.parent;for(i=0;i<d;i++)o=n[i],(a||!((v=o==null?void 0:o.reactions)!=null&&v.includes(s)))&&(o.reactions??(o.reactions=[])).push(s);a&&(s.f^=at),l&&c!==null&&(c.f&J)===0&&(s.f^=J)}for(i=0;i<d;i++)if(o=n[i],Je(o)&&Ln(o),o.wv>e.wv)return!0}(!r||L!==null&&!he)&&ae(e,G)}return!1}function zr(e,t){for(var n=t;n!==null;){if((n.f&ot)!==0)try{n.fn(e);return}catch{n.f^=ot}n=n.parent}throw rt=!1,e}function Gr(e){return(e.f&mt)===0&&(e.parent===null||(e.parent.f&ot)===0)}function Et(e,t,n,r){if(rt){if(n===null&&(rt=!1),Gr(t))throw e;return}n!==null&&(rt=!0);{zr(e,t);return}}function Hn(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];H!=null&&H.includes(e)||((o.f&ie)!==0?Hn(o,t,!1):t===o&&(n?ae(o,fe):(o.f&G)!==0&&ae(o,Me),Tt(o)))}}function Wn(e){var _;var t=B,n=Y,r=K,i=O,o=he,a=H,l=V,d=re,s=e.f;B=null,Y=0,K=null,he=(s&J)!==0&&(re||!Se||O===null),O=(s&(ue|qe))===0?e:null,H=null,st(e.ctx),re=!1,ct++,e.f|=At;try{var c=(0,e.fn)(),v=e.deps;if(B!==null){var u;if(dt(e,Y),v!==null&&Y>0)for(v.length=Y+B.length,u=0;u<B.length;u++)v[Y+u]=B[u];else e.deps=v=B;if(!he)for(u=Y;u<v.length;u++)((_=v[u]).reactions??(_.reactions=[])).push(e)}else v!==null&&Y<v.length&&(dt(e,Y),v.length=Y);if(Tn()&&K!==null&&!re&&v!==null&&(e.f&(ie|Me|fe))===0)for(u=0;u<K.length;u++)Hn(K[u],e);return i!==null&&(ct++,K!==null&&(r===null?r=K:r.push(...K))),c}finally{B=t,Y=n,K=r,O=i,he=o,H=a,st(l),re=d,e.f^=At}}function Kr(e,t){let n=t.reactions;if(n!==null){var r=tr.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&ie)!==0&&(B===null||!B.includes(t))&&(ae(t,Me),(t.f&(J|at))===0&&(t.f^=at),Fn(t),dt(t,0))}function dt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Kr(e,n[r])}function Zt(e){var t=e.f;if((t&mt)===0){ae(e,G);var n=L,r=V,i=Se;L=e,Se=!0;try{(t&Vt)!==0?Hr(e):Dn(e),An(e);var o=Wn(e);e.teardown=typeof o=="function"?o:null,e.wv=Bn;var a=e.deps,l;$t&&yr&&e.f&fe}catch(d){Et(d,e,n,r||e.ctx)}finally{Se=i,L=n}}}function Jr(){try{_r()}catch(e){if(ft!==null)Et(e,ft,null);else throw e}}function Xn(){var e=Se;try{var t=0;for(Se=!0;Ve.length>0;){t++>1e3&&Jr();var n=Ve,r=n.length;Ve=[];for(var i=0;i<r;i++){var o=Qr(n[i]);Zr(o)}}}finally{ut=!1,Se=e,ft=null,We.clear()}}function Zr(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(mt|le))===0)try{Je(r)&&(Zt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?In(r):r.fn=null))}catch(i){Et(i,r,null,r.ctx)}}}function Tt(e){ut||(ut=!0,queueMicrotask(Xn));for(var t=ft=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(qe|ue))!==0){if((n&G)===0)return;t.f^=G}}Ve.push(t)}function Qr(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(ue|qe))!==0,o=i&&(r&G)!==0;if(!o&&(r&le)===0){if((r&bn)!==0)t.push(n);else if(i)n.f^=G;else{var a=O;try{O=n,Je(n)&&Zt(n)}catch(s){Et(s,n,null,n.ctx)}finally{O=a}}var l=n.first;if(l!==null){n=l;continue}}var d=n.parent;for(n=n.next;n===null&&d!==null;)n=d.next,d=d.parent}return t}function $r(e){var t;for(on();Ve.length>0;)ut=!0,Xn(),on();return t}function f(e){var t=e.f,n=(t&ie)!==0;if(O!==null&&!re){if(!(H!=null&&H.includes(e))){var r=O.deps;e.rv<ct&&(e.rv=ct,B===null&&r!==null&&r[Y]===e?Y++:B===null?B=[e]:(!he||!B.includes(e))&&B.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&J)===0&&(i.f^=J)}return n&&(i=e,Je(i)&&Ln(i)),Ke&&We.has(e)?We.get(e):e.v}function De(e){var t=re;try{return re=!0,e()}finally{re=t}}const ei=-7169;function ae(e,t){e.f=e.f&ei|t}const ti=["touchstart","touchmove"];function ni(e){return ti.includes(e)}let sn=!1;function ri(){sn||(sn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Yn(e){var t=O,n=L;Z(null),oe(null);try{return e()}finally{Z(t),oe(n)}}function Qt(e,t,n,r=n){e.addEventListener(t,()=>Yn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),ri()}const zn=new Set,It=new Set;function ii(e,t,n,r={}){function i(o){if(r.capture||Be.call(t,o),!o.cancelBubble)return Yn(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?kt(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function oi(e,t,n,r,i){var o={capture:r,passive:i},a=ii(e,t,n,o);(t===document.body||t===window||t===document)&&Pn(()=>{t.removeEventListener(e,a,o)})}function Ct(e){for(var t=0;t<e.length;t++)zn.add(e[t]);for(var n of It)n(e)}function Be(e){var g;var t=this,n=t.ownerDocument,r=e.type,i=((g=e.composedPath)==null?void 0:g.call(e))||[],o=i[0]||e.target,a=0,l=e.__root;if(l){var d=i.indexOf(l);if(d!==-1&&(t===document||t===window)){e.__root=t;return}var s=i.indexOf(t);if(s===-1)return;d<=s&&(a=d)}if(o=i[a]||e.target,o!==t){nr(e,"currentTarget",{configurable:!0,get(){return o||n}});var c=O,v=L;Z(null),oe(null);try{for(var u,_=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var S=o["__"+r];if(S!=null&&(!o.disabled||e.target===o))if(ht(S)){var[b,...x]=S;b.apply(o,[e,...x])}else S.call(o,e)}catch(y){u?_.push(y):u=y}if(e.cancelBubble||p===t||p===null)break;o=p}if(u){for(let y of _)queueMicrotask(()=>{throw y});throw u}}finally{e.__root=t,delete e.currentTarget,Z(c),oe(v)}}}function ai(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function qt(e,t){var n=L;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function q(e,t){var n=(t&Sr)!==0,r=(t&xr)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=ai(o?e:"<!>"+e),n||(i=lt(i)));var a=r||xn?document.importNode(i,!0):i.cloneNode(!0);if(n){var l=lt(a),d=a.lastChild;qt(l,d)}else qt(a,a);return a}}function si(){var e=document.createDocumentFragment(),t=document.createComment(""),n=zt();return e.append(t,n),qt(t,n),e}function I(e,t){e!==null&&e.before(t)}function Ie(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function li(e,t){return ui(e,t)}const Ne=new Map;function ui(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:a=!0}){Ar();var l=new Set,d=v=>{for(var u=0;u<v.length;u++){var _=v[u];if(!l.has(_)){l.add(_);var p=ni(_);t.addEventListener(_,Be,{passive:p});var S=Ne.get(_);S===void 0?(document.addEventListener(_,Be,{passive:p}),Ne.set(_,1)):Ne.set(_,S+1)}}};d(jt(zn)),It.add(d);var s=void 0,c=Vr(()=>{var v=n??t.appendChild(zt());return ge(()=>{if(o){Ye({});var u=V;u.c=o}i&&(r.$$events=i),s=e(v,r)||{},o&&ze()}),()=>{var p;for(var u of l){t.removeEventListener(u,Be);var _=Ne.get(u);--_===0?(document.removeEventListener(u,Be),Ne.delete(u)):Ne.set(u,_)}It.delete(d),v!==n&&((p=v.parentNode)==null||p.removeChild(v))}});return fi.set(s,c),s}let fi=new WeakMap;const Rt=0,$e=1,Nt=2;function ci(e,t,n,r,i){var o=e,a=V,l=U,d,s,c,v=Ae(void 0),u=Ae(void 0),_=!1;function p(b,x){_=!0,x&&(oe(S),Z(S),st(a));try{b===Rt&&n&&(d?Ce(d):d=ge(()=>n(o))),b===$e&&r&&(s?Ce(s):s=ge(()=>r(o,v))),b===Nt&&i&&(c?Ce(c):c=ge(()=>i(o,u))),b!==Rt&&d&&Te(d,()=>d=null),b!==$e&&s&&Te(s,()=>s=null),b!==Nt&&c&&Te(c,()=>c=null)}finally{x&&(st(null),Z(null),oe(null),$r())}}var S=wt(()=>{if(l!==(l=t())){if(or(l)){var b=l;_=!1,b.then(x=>{b===l&&(Pe(v,x),p($e,!0))},x=>{if(b===l&&(Pe(u,x),p(Nt,!0),!i))throw u.v}),kt(()=>{_||p(Rt,!0)})}else Pe(v,l),p($e,!1);return()=>l=U}})}function pe(e,t,[n,r]=[0,0]){var i=e,o=null,a=null,l=U,d=n>0?Ht:0,s=!1;const c=(u,_=!0)=>{s=!0,v(_,u)},v=(u,_)=>{l!==(l=u)&&(l?(o?Ce(o):_&&(o=ge(()=>_(i))),a&&Te(a,()=>{a=null})):(a?Ce(a):_&&(a=ge(()=>_(i,[n+1,r]))),o&&Te(o,()=>{o=null})))};wt(()=>{s=!1,t(c),s||v(null,null)},d)}function vt(e,t){return t}function di(e,t,n,r){for(var i=[],o=t.length,a=0;a<o;a++)Jt(t[a].e,i,!0);var l=o>0&&i.length===0&&n!==null;if(l){var d=n.parentNode;Dr(d),d.append(n),r.clear(),_e(e,t[0].prev,t[o-1].next)}qn(i,()=>{for(var s=0;s<o;s++){var c=t[s];l||(r.delete(c.k),_e(e,c.prev,c.next)),me(c.e,!l)}})}function _t(e,t,n,r,i,o=null){var a=e,l={flags:t,items:new Map,first:null},d=(t&En)!==0;if(d){var s=e;a=s.appendChild(zt())}var c=null,v=!1,u=Ir(()=>{var _=n();return ht(_)?_:_==null?[]:jt(_)});wt(()=>{var _=f(u),p=_.length;v&&p===0||(v=p===0,vi(_,l,a,i,t,r,n),o!==null&&(p===0?c?Ce(c):c=ge(()=>o(a)):c!==null&&Te(c,()=>{c=null})),f(u))})}function vi(e,t,n,r,i,o,a){var be,xe,m,T;var l=(i&br)!==0,d=(i&(Xt|Yt))!==0,s=e.length,c=t.items,v=t.first,u=v,_,p=null,S,b=[],x=[],g,y,h,k;if(l)for(k=0;k<s;k+=1)g=e[k],y=o(g,k),h=c.get(y),h!==void 0&&((be=h.a)==null||be.measure(),(S??(S=new Set)).add(h));for(k=0;k<s;k+=1){if(g=e[k],y=o(g,k),h=c.get(y),h===void 0){var F=u?u.e.nodes_start:n;p=pi(F,t,p,p===null?t.first:p.next,g,y,k,r,i,a),c.set(y,p),b=[],x=[],u=p.next;continue}if(d&&_i(h,g,k,i),(h.e.f&le)!==0&&(Ce(h.e),l&&((xe=h.a)==null||xe.unfix(),(S??(S=new Set)).delete(h))),h!==u){if(_!==void 0&&_.has(h)){if(b.length<x.length){var P=x[0],A;p=P.prev;var se=b[0],Q=b[b.length-1];for(A=0;A<b.length;A+=1)ln(b[A],P,n);for(A=0;A<x.length;A+=1)_.delete(x[A]);_e(t,se.prev,Q.next),_e(t,p,se),_e(t,Q,P),u=P,p=Q,k-=1,b=[],x=[]}else _.delete(h),ln(h,u,n),_e(t,h.prev,h.next),_e(t,h,p===null?t.first:p.next),_e(t,p,h),p=h;continue}for(b=[],x=[];u!==null&&u.k!==y;)(u.e.f&le)===0&&(_??(_=new Set)).add(u),x.push(u),u=u.next;if(u===null)continue;h=u}b.push(h),p=h,u=h.next}if(u!==null||_!==void 0){for(var W=_===void 0?[]:jt(_);u!==null;)(u.e.f&le)===0&&W.push(u),u=u.next;var X=W.length;if(X>0){var ye=(i&En)!==0&&s===0?n:null;if(l){for(k=0;k<X;k+=1)(m=W[k].a)==null||m.measure();for(k=0;k<X;k+=1)(T=W[k].a)==null||T.fix()}di(t,W,ye,c)}}l&&kt(()=>{var R;if(S!==void 0)for(h of S)(R=h.a)==null||R.apply()}),L.first=t.first&&t.first.e,L.last=p&&p.e}function _i(e,t,n,r){(r&Xt)!==0&&Pe(e.v,t),(r&Yt)!==0?Pe(e.i,n):e.i=n}function pi(e,t,n,r,i,o,a,l,d,s){var c=(d&Xt)!==0,v=(d&wr)===0,u=c?v?Cn(i):Ae(i):i,_=(d&Yt)===0?a:Ae(a),p={i:_,v:u,k:o,a:null,e:null,prev:n,next:r};try{return p.e=ge(()=>l(e,u,_,s),Pr),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function ln(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var a=yt(o);i.before(o),o=a}}function _e(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Gn(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Gn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function hi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Gn(e))&&(r&&(r+=" "),r+=t);return r}function un(e){return typeof e=="object"?hi(e):e??""}function gi(e,t,n){var r=e==null?"":""+e;return t&&(r=r?r+" "+t:t),r===""?null:r}function fn(e,t,n,r,i,o){var a=e.__className;if(a!==n||a===void 0){var l=gi(n,r);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}return o}const mi=Symbol("is custom element"),yi=Symbol("is html");function ve(e,t,n,r){var i=bi(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[ur]=n),n==null?e.removeAttribute(t):typeof n!="string"&&wi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function bi(e){return e.__attributes??(e.__attributes={[mi]:e.nodeName.includes("-"),[yi]:e.namespaceURI===Or})}var cn=new Map;function wi(e){var t=cn.get(e.nodeName);if(t)return t;cn.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=rr(r);for(var o in n)n[o].set&&t.push(o);r=Bt(r)}return t}function Fe(e,t,n=t){Qt(e,"input",r=>{var i=r?e.defaultValue:e.value;if(i=Ft(e)?Lt(i):i,n(i),i!==(i=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=i??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),De(t)==null&&e.value&&n(Ft(e)?Lt(e.value):e.value),Kt(()=>{var r=t();Ft(e)&&r===Lt(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Kn(e,t,n=t){Qt(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),De(t)==null&&n(e.checked),Kt(()=>{var r=t();e.checked=!!r})}function Ft(e){var t=e.type;return t==="number"||t==="range"}function Lt(e){return e===""?null:+e}function Jn(e,t,n){if(e.multiple)return Ti(e,t);for(var r of e.options){var i=He(r);if(Lr(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ki(e,t){Ge(()=>{var n=new MutationObserver(()=>{var r=e.__value;Jn(e,r)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function Ei(e,t,n=t){var r=!0;Qt(e,"change",i=>{var o=i?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(o),He);else{var l=e.querySelector(o)??e.querySelector("option:not([disabled])");a=l&&He(l)}n(a)}),Ge(()=>{var i=t();if(Jn(e,i,r),r&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=He(o),n(i))}e.__value=i,r=!1}),ki(e)}function Ti(e,t){for(var n of e.options)n.selected=~t.indexOf(He(n))}function He(e){return"__value"in e?e.__value:e.value}function dn(e,t){return e===t||(e==null?void 0:e[Ee])===t}function Ci(e={},t,n,r){return Ge(()=>{var i,o;return Kt(()=>{i=o,o=[],De(()=>{e!==n(...o)&&(t(e,...o),i&&dn(n(...i),e)&&t(null,...i))})}),()=>{kt(()=>{o&&dn(n(...o),e)&&t(null,...o)})}}),e}let et=!1;function Si(e){var t=et;try{return et=!1,[e(),et]}finally{et=t}}function vn(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function pt(e,t,n,r){var k;var i=(n&kr)!==0,o=!0,a=(n&Tr)!==0,l=(n&Cr)!==0,d=!1,s;a?[s,d]=Si(()=>e[t]):s=e[t];var c=Ee in e||lr in e,v=a&&(((k=Le(e,t))==null?void 0:k.set)??(c&&t in e&&(F=>e[t]=F)))||void 0,u=r,_=!0,p=!1,S=()=>(p=!0,_&&(_=!1,l?u=De(r):u=r),u);s===void 0&&r!==void 0&&(v&&o&&pr(),s=S(),v&&v(s));var b;if(b=()=>{var F=e[t];return F===void 0?S():(_=!0,p=!1,F)},(n&Er)===0)return b;if(v){var x=e.$$legacy;return function(F,P){return arguments.length>0?((!P||x||d)&&v(P?b():F),F):b()}}var g=!1,y=Cn(s),h=bt(()=>{var F=b(),P=f(y);return g?(g=!1,P):y.v=F});return a&&f(h),i||(h.equals=Wt),function(F,P){if(arguments.length>0){const A=P?f(h):a?z(F):F;if(!h.equals(A)){if(g=!0,C(y,A),p&&u!==void 0&&(u=A),vn(h))return F;De(()=>f(h))}return F}return vn(h)?h.v:f(h)}}function xi(e){V===null&&Fr(),Br(()=>{const t=De(e);if(typeof t=="function")return t})}const Oi="5";var gn;typeof window<"u"&&((gn=window.__svelte??(window.__svelte={})).v??(gn.v=new Set)).add(Oi);function Ri(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var it={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */var Ni=it.exports,_n;function Fi(){return _n||(_n=1,function(e){(function(t,n){e.exports?e.exports=n():t.Toastify=n()})(Ni,function(t){var n=function(a){return new n.lib.init(a)},r="1.12.0";n.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},n.lib=n.prototype={toastify:r,constructor:n,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||n.defaults.text,this.options.node=a.node||n.defaults.node,this.options.duration=a.duration===0?0:a.duration||n.defaults.duration,this.options.selector=a.selector||n.defaults.selector,this.options.callback=a.callback||n.defaults.callback,this.options.destination=a.destination||n.defaults.destination,this.options.newWindow=a.newWindow||n.defaults.newWindow,this.options.close=a.close||n.defaults.close,this.options.gravity=a.gravity==="bottom"?"toastify-bottom":n.defaults.gravity,this.options.positionLeft=a.positionLeft||n.defaults.positionLeft,this.options.position=a.position||n.defaults.position,this.options.backgroundColor=a.backgroundColor||n.defaults.backgroundColor,this.options.avatar=a.avatar||n.defaults.avatar,this.options.className=a.className||n.defaults.className,this.options.stopOnFocus=a.stopOnFocus===void 0?n.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||n.defaults.onClick,this.options.offset=a.offset||n.defaults.offset,this.options.escapeMarkup=a.escapeMarkup!==void 0?a.escapeMarkup:n.defaults.escapeMarkup,this.options.ariaLive=a.ariaLive||n.defaults.ariaLive,this.options.style=a.style||n.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var l in this.options.style)a.style[l]=this.options.style[l];if(this.options.ariaLive&&a.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,this.options.avatar!==""){var d=document.createElement("img");d.src=this.options.avatar,d.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?a.appendChild(d):a.insertAdjacentElement("afterbegin",d)}if(this.options.close===!0){var s=document.createElement("button");s.type="button",s.setAttribute("aria-label","Close"),s.className="toast-close",s.innerHTML="&#10006;",s.addEventListener("click",(function(b){b.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var c=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&c>360?a.insertAdjacentElement("afterbegin",s):a.appendChild(s)}if(this.options.stopOnFocus&&this.options.duration>0){var v=this;a.addEventListener("mouseover",function(b){window.clearTimeout(a.timeOutValue)}),a.addEventListener("mouseleave",function(){a.timeOutValue=window.setTimeout(function(){v.removeElement(a)},v.options.duration)})}if(typeof this.options.destination<"u"&&a.addEventListener("click",(function(b){b.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&a.addEventListener("click",(function(b){b.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var u=i("x",this.options),_=i("y",this.options),p=this.options.position=="left"?u:"-"+u,S=this.options.gravity=="toastify-top"?_:"-"+_;a.style.transform="translate("+p+","+S+")"}return a},showToast:function(){this.toastElement=this.buildToast();var a;if(typeof this.options.selector=="string"?a=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?a=this.options.selector:a=document.body,!a)throw"Root element is not defined";var l=n.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,l),n.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),n.reposition()}).bind(this),400)}},n.reposition=function(){for(var a={top:15,bottom:15},l={top:15,bottom:15},d={top:15,bottom:15},s=document.getElementsByClassName("toastify"),c,v=0;v<s.length;v++){o(s[v],"toastify-top")===!0?c="toastify-top":c="toastify-bottom";var u=s[v].offsetHeight;c=c.substr(9,c.length-1);var _=15,p=window.innerWidth>0?window.innerWidth:screen.width;p<=360?(s[v].style[c]=d[c]+"px",d[c]+=u+_):o(s[v],"toastify-left")===!0?(s[v].style[c]=a[c]+"px",a[c]+=u+_):(s[v].style[c]=l[c]+"px",l[c]+=u+_)}return this};function i(a,l){return l.offset[a]?isNaN(l.offset[a])?l.offset[a]:l.offset[a]+"px":"0px"}function o(a,l){return!a||typeof l!="string"?!1:!!(a.className&&a.className.trim().split(/\s+/gi).indexOf(l)>-1)}return n.lib.init.prototype=n.lib,n})}(it)),it.exports}var Li=Fi();const Pt=Ri(Li);function te(e,t,n="info"){switch(n){case"info":Pt({text:e,duration:t}).showToast();break;case"warn":Pt({text:e,duration:-1,close:!0,style:{background:"gold"}}).showToast();case"error":Pt({text:e,duration:-1,close:!0,style:{background:"darkred"}}).showToast()}}function ne(e,t,n){t||(t="Success!"),n||(n="Failed"),e.status==200?te(t,4e3,"info"):te(`${n} (${e.statusText})`,4e3,"error")}/*! js-cookie v3.0.5 | MIT */function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Pi={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Mt(e,t){function n(i,o,a){if(!(typeof document>"u")){a=tt({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var d in a)a[d]&&(l+="; "+d,a[d]!==!0&&(l+="="+a[d].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+l}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},l=0;l<o.length;l++){var d=o[l].split("="),s=d.slice(1).join("=");try{var c=decodeURIComponent(d[0]);if(a[c]=e.read(s,c),i===c)break}catch{}}return i?a[i]:a}}return Object.create({set:n,get:r,remove:function(i,o){n(i,"",tt({},o,{expires:-1}))},withAttributes:function(i){return Mt(this.converter,tt({},this.attributes,i))},withConverter:function(i){return Mt(tt({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Ai=Mt(Pi,{path:"/"});const Zn=["image/png","image/jpeg","image/webp","image/apng","image/avif","image/gif"],Qn=["video/mp4","video/webm","video/ogg"],M=Ai.get("csrftoken")||"";async function Di(e){const t=new Request(`/objects/gallery/${e}/metadata`,{method:"GET",headers:{"X-CSRFToken":M}});return(await fetch(t).then()).json().then(n=>n)}async function Ii(e){const t=new Request(`/objects/gallery/${e}/media`,{method:"GET",headers:{"X-CSRFToken":M}});return(await fetch(t).then()).json().then(n=>n)}async function qi(){const e=new Request("/categories/json",{method:"GET",headers:{"X-CSRFToken":M}});return(await fetch(e).then()).json().then(t=>t)}function Mi(){return new Promise(e=>{const t=document.createElement("input");t.type="file",t.accept=[...Zn,...Qn].join(", "),t.multiple=!0,t.addEventListener("change",async n=>{if(!n.target)return;const r=n.target.files;if(!r||r.length==0)return;let i=[];const o=Ui(r);Promise.allSettled(o).then(async a=>{for(let l of a.filter(d=>d.status=="fulfilled"))await ji(l.value).then(d=>{d?(console.log("Uploaded",d),i.push(d),te(`Uploaded ${d.title}`,2e3)):te(`Failed to upload ${l.value.file.name}`,2e3)});console.log("resolved",i),e(i)})}),t.click()})}function Ui(e){let t=[];for(let n of e)Zn.includes(n.type)?t.push(new Promise((r,i)=>{const o=new FileReader;o.onload=()=>{const a=new Image;a.src=o.result,a.onload=()=>{r({file:n,height:a.height,width:a.width,type:n.type})}},o.onerror=()=>i(new Error("Failed to read file")),o.readAsDataURL(n)})):Qn.includes(n.type)&&t.push(new Promise((r,i)=>{const o=document.createElement("video"),a=URL.createObjectURL(n);o.onloadedmetadata=()=>{o.videoWidth,o.videoHeight,URL.revokeObjectURL(a),r({file:n,height:o.videoHeight,width:o.videoWidth,type:n.type})},o.onerror=()=>{URL.revokeObjectURL(a),i(new Error("Failed to read file"))},o.src=a}));return t}async function ji(e){let t=new FormData;t.append("file",e.file),t.append("type",e.type),t.append("width",e.width.toString()),t.append("height",e.height.toString()),t.append("loop","false");let n=new Request("/create/media",{method:"POST",body:t,headers:{"X-CSRFToken":M}});return new Promise((r,i)=>{fetch(n).then(o=>{o.json().then(a=>{a.url&&a.uuid?(console.log("Created",a.url),r({uuid:a.uuid,url:a.url,type:e.type,title:"",description:"",uploaderDescription:"",loop:!1,creator_tags:[],discord_creator:"",discord_creator_tag:[],tags:[]})):i(new Error(`Failed to upload ${e.file.name}`))})})})}async function Bi(e){let t=new FormData,n="";e.includes("youtu.be/")?n=e.split("/").pop():n=e.split("v=").pop(),t.append("url","https://www.youtube-nocookie.com/embed/"+n),t.append("type","embed"),t.append("width","1280"),t.append("height","720"),t.append("loop","false");let r=new Request("/create/mediaEmbed",{method:"POST",body:t,headers:{"X-CSRFToken":M}});return new Promise((i,o)=>{fetch(r).then(a=>{a.json().then(l=>{l.url&&l.uuid?(console.log("Created",l.url),i({uuid:l.uuid,url:l.url,type:"embed",title:"",description:"",uploaderDescription:"",loop:!1,creator_tags:[],discord_creator:"",discord_creator_tag:[],tags:[]})):o(new Error(`Failed to upload ${e}`))})})})}async function Vi(e){let t=new FormData;t.append("uuid",e.uuid),t.append("title",e.title),t.append("creator_tags",JSON.stringify(e.creator_tags)),t.append("tags",JSON.stringify(e.tags)),t.append("description",e.description),t.append("uploaderDescription",e.uploaderDescription),t.append("loop",e.loop.toString());let n=new Request("/modify/media",{method:"POST",body:t,headers:{"X-CSRFToken":M}});return fetch(n).then(r=>(ne(r,"Updated media!","Failed to update media"),r.status==200))}async function Hi(e,t){let n=new FormData;n.append("creator",e),n.append("tag",t);let r=new Request("/tags/discordLink",{method:"POST",body:n,headers:{"X-CSRFToken":M}});return fetch(r).then(i=>(ne(i,"Linked Discord creator!","Failed to link Discord creator"),i.status==200))}async function Wi(e){let t=new FormData;t.append("uuid",e);let n=new Request("/objects/discordUnlink",{method:"POST",body:t,headers:{"X-CSRFToken":M}});return fetch(n).then(r=>(ne(r,"Unlinked Discord creator!","Failed to unlink Discord creator"),r.status==200))}async function Xi(e){let t=new Request("/modify/media",{method:"DELETE",body:e,headers:{"X-CSRFToken":M}});return fetch(t).then(n=>(ne(n,"Deleted file","Failed to delete file"),n.status==200))}async function Yi(e){let t=new Request(`/objects/detach/${e}`,{method:"POST",headers:{"X-CSRFToken":M}});return fetch(t).then(n=>(ne(n,"Orphaned file","Failed to orphan file"),n.status==200))}async function zi(e,t){let n=new Request(`/modify/gallery/${e}/visibility`,{method:"POST",body:t.toString(),headers:{"X-CSRFToken":M}});return fetch(n).then(r=>(ne(r,"Updated visibility!","Failed to update visibility"),r.status==200))}async function Gi(e,t){let n=new Request(`/modify/gallery/${e}/date`,{method:"POST",body:t,headers:{"X-CSRFToken":M}});return fetch(n).then(r=>(ne(r,"Updated date!","Failed to update date"),r.status==200))}async function $n(e,t){let n=new Request(`/modify/gallery/${t}/associate_single_media`,{method:"POST",body:e,headers:{"X-CSRFToken":M}});return fetch(n).then(r=>(ne(r,"Linked media to gallery","Media link failed"),r.status==200))}async function Ki(e,t){const n=e.map(i=>i.uuid);let r=new Request(`/modify/gallery/${t}/media`,{method:"POST",body:n.toString(),headers:{"X-CSRFToken":M}});return fetch(r).then(i=>(ne(i,"Updated gallery order!","Failed to update gallery order"),i.status==200))}async function Ji(e,t){let n=new Request(`/modify/gallery/${t}/title`,{method:"POST",body:e,headers:{"X-CSRFToken":M}});return fetch(n).then(r=>(ne(r,"Updated title!","Failed to update title"),r.status==200))}async function Zi(e,t){let n=new Request(`/modify/gallery/${t}/category`,{method:"POST",body:e,headers:{"X-CSRFToken":M}});return fetch(n).then(r=>(ne(r,"Updated category!","Failed to update category"),r.status==200),()=>!1)}async function pn(e,t){let n={incomplete_tag:e,namespace:t};console.log("test2");let r=new Request("/tags/autocomplete/",{method:"POST",body:JSON.stringify(n),headers:{"X-CSRFToken":M}});return fetch(r).then(i=>i.json()).then(i=>i.tags)}var Qi=(e,t,n)=>{t()(n.tag)},$i=q('<div class="tag"><span class="tagLabel"> </span></div>');function er(e,t){Ye(t,!0);let n=pt(t,"clicked",3,()=>{});var r=$i();r.__click=[Qi,n,t];var i=E(r),o=E(i);ee(()=>{ve(r,"data-tag-namespace",t.tag.namespace),Ie(o,t.tag.tagname)}),I(e,r),ze()}Ct(["click"]);function hn(e,t){let n;return function(){clearTimeout(n),n=setTimeout(()=>e(),t)}}var eo=e=>{e.stopPropagation()},to=q('<input type="text" name="creator_tags">'),no=(e,t,n)=>{t(f(n))},ro=q("<li> </li>"),io=q('<div class="autocompletePopup"><ul></ul></div>'),oo=q('<div class="autocompletePopup"><ul><li>Error fetching tag list</li></ul></div>'),ao=q("<span></span>"),so=q('<div class="tagInput"><div class="tag-wrapper"></div> <!> <!></div>');function Ut(e,t){Ye(t,!0);let n=pt(t,"namespace",3,""),r=pt(t,"single",3,!1),i=D("");function o(g){if(f(i).length===0)u();else if(n()===""&&f(i).includes(":")){const[y,h]=f(i).split(":");C(a,pn(h,y),!0)}else C(a,pn(f(i),n()),!0)}let a=D(void 0);function l(g){if(g.key==="Enter"&&(g.preventDefault(),f(i).length>0))if(n()===""&&f(i).includes(":")){const[y,...h]=f(i).split(":"),k=h.join(":");c({tagname:k,namespace:y})}else c({tagname:f(i),namespace:n()});g.key==="Escape"&&u(),g.key==="Backspace"&&f(i).length===0&&(t.tags.pop(),s.dispatchEvent(d)),g.key==="Tab"&&(g.preventDefault(),f(a)&&f(a).then(y=>{y.length>0&&c(y[0])}))}const d=new Event("change",{bubbles:!0,cancelable:!0});let s;function c(g){t.tags.push(g),C(i,""),u(),s.dispatchEvent(d)}function v(g){t.tags.splice(t.tags.indexOf(g),1),s.dispatchEvent(d)}function u(){C(a,void 0)}var _=so(),p=E(_);_t(p,21,()=>t.tags,vt,(g,y)=>{er(g,{get tag(){return f(y)},clicked:v})});var S=w(p,2);{var b=g=>{var y=to(),h=Gt(()=>hn(o,250));y.__input=function(...k){var F;(F=f(h))==null||F.apply(this,k)},y.__keydown=l,y.__change=[eo],oi("blur",y,()=>hn(u,1e3)),Fe(y,()=>f(i),k=>C(i,k)),I(g,y)};pe(S,g=>{r()&&t.tags.length>0||g(b)})}var x=w(S,2);ci(x,()=>f(a),g=>{var y=ao();I(g,y)},(g,y)=>{var h=si(),k=Nn(h);{var F=P=>{var A=io(),se=E(A);_t(se,21,()=>f(y),vt,(Q,W)=>{var X=ro();X.__click=[no,c,W];var ye=E(X);ee(()=>Ie(ye,`${f(W).namespace??""}:${f(W).tagname??""}`)),I(Q,X)}),I(P,A)};pe(k,P=>{f(y)&&f(y).length>0&&P(F)})}I(g,h)},(g,y)=>{var h=oo();I(g,h)}),Ci(_,g=>s=g,()=>s),I(e,_),ze()}Ct(["input","keydown","change","click"]);function lo(e,t,n){C(t,!f(t)),f(t)?localStorage.setItem(`media_${n().uuid}_collapsed`,"true"):localStorage.removeItem(`media_${n().uuid}_collapsed`)}function uo(e,t,n,r){e.stopPropagation(),t.hooks.setIndex(n(),f(r))}function fo(e,t,n){C(t,"saving"),Vi(n()).then(r=>{r?C(t,"saved"):C(t,"changed")}).catch(r=>{console.error("Error saving media:",r),C(t,"changed")})}var co=(e,t,n)=>t.hooks.moveUp(n()),vo=(e,t,n)=>t.hooks.moveDown(n()),_o=q('<img loading="lazy">'),po=q('<video controls></video> <label><input type="checkbox" name="loop">Loop</label>',3),ho=q("<p>🔗 <a>Embed</a></p>"),go=q("<p>Unknown media type <a>File</a></p>"),mo=(e,t,n)=>t.hooks.delete(n()),yo=(e,t,n)=>t.hooks.orphan(n()),bo=q('<div class="previewOverlay"><img alt="" loading="lazy"></div>'),wo=(e,t,n)=>{t.hooks.editDiscord(n())},ko=q('<div data-tag-namespace="creator"> </div>'),Eo=q(`<div><div class="mediaHeader"><span class="counter"> </span> <button type="button" name="collapse" class="collapseButton"></button></div> <div class="moveButtons"><button type="button" name="up">⬆️</button> <input type="text" name="order" class="orderInput"> <button type="button" name="down">⬇️</button></div> <form><div class="imageContainer"><!> <button type="button" name="delete">Delete</button> <button type="button" name="orphan">Orphan</button> <!></div> <div class="dataContainer"><div><label for="title">Title</label> <input type="text" name="title" maxlength="256"></div> <div><label for="creator_tags">Creator(s)</label> <div class="creatorContainer"><!> <!></div></div> <div><label for="tags">Tags</label> <!></div> <div><label for="description">Creator's description</label> <textarea name="description"></textarea></div> <div><label for="uploaderDescription">Uploader's description</label> <textarea name="uploaderDescription"></textarea></div></div></form></div>`);function To(e,t){Ye(t,!0);let n=pt(t,"media",15),r=D(z(localStorage.getItem(`media_${n().uuid}_collapsed`)==="true"||!1)),i=Gt(()=>n().discord_creator_tag.length===0),o=D("saved"),a=D(z(t.index));var l=Eo();l.__change=[fo,o,n];var d=E(l),s=E(d),c=E(s),v=w(s,2);v.__click=[lo,r,n];var u=w(d,2),_=E(u);_.__click=[co,t,n];var p=w(_,2);p.__change=[uo,t,n,a];var S=w(p,2);S.__click=[vo,t,n];var b=w(u,2),x=E(b),g=E(x);{var y=N=>{var j=_o();ee(()=>{ve(j,"src",n().url),ve(j,"alt",n().title)}),I(N,j)},h=(N,j)=>{{var we=ce=>{var Re=po(),je=Nn(Re),xt=w(je,2),de=E(xt);ee(()=>{ve(je,"src",n().url),je.loop=n().loop}),Kn(de,()=>n().loop,ke=>n(n().loop=ke,!0)),I(ce,Re)},Qe=(ce,Re)=>{{var je=de=>{var ke=ho(),Ot=w(E(ke));ee(()=>ve(Ot,"href",n().url)),I(de,ke)},xt=de=>{var ke=go(),Ot=w(E(ke));ee(()=>ve(Ot,"href",n().url)),I(de,ke)};pe(ce,de=>{n().type==="embed"?de(je):de(xt,!1)},Re)}};pe(N,ce=>{n().type.startsWith("video/")?ce(we):ce(Qe,!1)},j)}};pe(g,N=>{n().type.startsWith("image/")?N(y):N(h,!1)})}var k=w(g,2);k.__click=[mo,t,n];var F=w(k,2);F.__click=[yo,t,n];var P=w(F,2);{var A=N=>{var j=bo(),we=E(j);ee(()=>ve(we,"src",n().url)),I(N,j)};pe(P,N=>{n().type.startsWith("image/")&&N(A)})}var se=w(x,2),Q=E(se),W=w(E(Q),2),X=w(Q,2),ye=w(E(X),2),be=E(ye);{var xe=N=>{var j=ko();j.__click=[wo,t,n];var we=E(j);ee(()=>{fn(j,1,un(["discordCreator","tag",{discordUnlinked:f(i)}]),"svelte-1kbyb42"),Ie(we,n().discord_creator)}),I(N,j)};pe(be,N=>{n().discord_creator!==""&&N(xe)})}var m=w(be,2);Ut(m,{namespace:"creator",get tags(){return n().creator_tags},set tags(N){n(n().creator_tags=N,!0)}});var T=w(X,2),R=w(E(T),2);Ut(R,{get tags(){return n().tags},set tags(N){n(n().tags=N,!0)}});var $=w(T,2),Oe=w(E($),2),Ze=w($,2),St=w(E(Ze),2);ee(()=>{fn(l,1,un(["mediaElement",{collapsed:f(r)}])),ve(l,"data-status",f(o)),Ie(c,t.index)}),Fe(p,()=>f(a),N=>C(a,N)),Fe(W,()=>n().title,N=>n(n().title=N,!0)),Fe(Oe,()=>n().description,N=>n(n().description=N,!0)),Fe(St,()=>n().uploaderDescription,N=>n(n().uploaderDescription=N,!0)),I(e,l),ze()}Ct(["change","click"]);function Co(e,t){const n=prompt("Enter new title:",f(t).title);!n||n==f(t).title||Ji(n,f(t).id).then(r=>{r&&(f(t).title=n)})}function So(e,t,n){if(f(t).category==="new"){const r=prompt("Enter new category name:");r&&(f(n).push(r),f(t).category=r)}Zi(f(t).category,f(t).id)}function xo(e,t){zi(f(t).id,f(t).visible).then(n=>{n||(f(t).visible=!f(t).visible)})}function Oo(e,t){Gi(f(t).id,f(t).created_date)}async function Ro(e,t,n){Mi().then(r=>{console.log(r,r.length);for(const i of r)console.log(i),$n(i.uuid,f(t).id).then(o=>{o?f(n).push(i):te(`Linking ${i.uuid} to gallery failed`,2e3,"warn")})})}async function No(e,t,n){const r=prompt("Enter YouTube URL:");r&&Bi(r).then(i=>{i?$n(i.uuid,f(t).id).then(o=>{o?f(n).push(i):te(`Linking ${i.uuid} to gallery failed`,2e3,"warn")}):te("Failed to add embed",2e3,"warn")})}function Fo(e,t,n,r){f(t)&&f(n)&&f(r).length>0&&Hi(f(t).discord_creator,f(r)[0].tagname).then(i=>{i&&f(n)&&(f(n).discord_creator_tag=[f(r)[0]],C(t,null),C(n,null),C(r,[],!0))})}function Lo(e,t,n,r){f(t)&&f(n)&&Wi(f(t).uuid).then(i=>{i&&f(n)&&(f(n).discord_creator="",C(t,null),C(n,null),C(r,[],!0))})}var Po=q("<option> </option>"),Ao=(e,t)=>{C(t,null)},Do=e=>{e.stopPropagation()},Io=(e,t)=>{C(t,null)},qo=q('<div id="discord-editor-overlay" class="svelte-dh18if"><div id="discord-editor" class="svelte-dh18if"><form><fieldset><legend>Link Discord user tag</legend> <!> <button type="button">Unlink</button> <div><label for="discord-description">Bound tag</label> <!></div></fieldset> <button type="button">Save</button> <button type="button">Cancel</button></form></div></div>'),Mo=q('<main class="svelte-dh18if"><div id="title" class="svelte-dh18if"><h1> </h1> <button title="Edit title">✏️</button></div> <div id="gallery-controls" class="svelte-dh18if"><div><label for="category">Category:</label> <select id="category"><!><option>+ New Category</option></select></div> <div><label for="visible">Visible</label> <input type="checkbox" name="visible" id="visible"></div> <div><label for="gallery_date">Date</label> <input type="date" name="gallery_date" id="gallery-date"></div></div> <div id="list-container" class="svelte-dh18if"></div> <div id="galleryButtonContainer"><button id="addMedia" title="Add media">Add media</button> <button id="addEmbed" title="Add embed">Add embed</button></div> <!></main>');function Uo(e,t){Ye(t,!0);const n=window.location.pathname.split("/").pop(),r=parseInt(n||"0");let i=D(z({id:r,title:"",category:"",created_date:"1970-01-01",visible:!1})),o=D(z([])),a=D(z([]));xi(()=>{Di(r).then(m=>{m&&C(i,m,!0)}).catch(m=>{te(`Error fetching gallery metadata: ${m}`)}),Ii(r).then(m=>{m&&C(o,m,!0)}).catch(m=>{te(`Error fetching gallery media: ${m}`)}),qi().then(m=>{m&&C(a,m,!0)}).catch(m=>{te(`Error fetching categories: ${m}`)})});function l(){Ki(f(o),f(i).id)}const d={moveUp:m=>{const T=f(o).indexOf(m);T>0&&(R=>(f(o)[T]=R[0],f(o)[T-1]=R[1]))([f(o)[T-1],f(o)[T]]),l()},moveDown:m=>{const T=f(o).indexOf(m);T<f(o).length-1&&(R=>(f(o)[T]=R[0],f(o)[T+1]=R[1]))([f(o)[T+1],f(o)[T]]),l()},setIndex:(m,T)=>{const R=f(o).indexOf(m);if(R===T)return;let $=f(o).splice(R,1);f(o).splice(T,0,$[0]),te(`Set ${m.uuid} index to ${T}`),l()},delete:m=>{const T=f(o).indexOf(m);T>-1&&Xi(m.uuid).then(R=>{R&&(f(o).splice(T,1),f(o).length!==0&&l())})},orphan:m=>{const T=f(o).indexOf(m);T>-1&&Yi(m.uuid).then(R=>{R&&(f(o).splice(T,1),f(o).length!==0&&l())})},editDiscord:m=>{C(c,m,!0),C(s,Nr(m),!0),C(v,f(s).discord_creator_tag,!0)}};let s=D(null),c=D(null),v=D(z([]));var u=Mo(),_=E(u),p=E(_),S=E(p),b=w(p,2);b.__click=[Co,i];var x=w(_,2),g=E(x),y=w(E(g),2);y.__change=[So,i,a];var h=E(y);_t(h,17,()=>f(a),vt,(m,T)=>{var R=Po(),$={},Oe=E(R);ee(()=>{$!==($=f(T))&&(R.value=(R.__value=f(T))==null?"":f(T)),Ie(Oe,f(T))}),I(m,R)});var k=w(h);k.value=(k.__value="new")==null?"":"new";var F=w(g,2),P=w(E(F),2);P.__change=[xo,i];var A=w(F,2),se=w(E(A),2);se.__change=[Oo,i];var Q=w(x,2);_t(Q,21,()=>f(o),vt,(m,T,R)=>{To(m,{index:R,hooks:d,get media(){return f(o)[R]},set media($){f(o)[R]=$}})});var W=w(Q,2),X=E(W);X.__click=[Ro,i,o];var ye=w(X,2);ye.__click=[No,i,o];var be=w(W,2);{var xe=m=>{var T=qo();T.__click=[Ao,s];var R=E(T);R.__click=[Do];var $=E(R),Oe=E($),Ze=w(E(Oe),2);const St=Gt(()=>({namespace:"creator",tagname:f(s).discord_creator}));er(Ze,{get tag(){return f(St)}});var N=w(Ze,2);N.__click=[Lo,s,c,v];var j=w(N,2),we=w(E(j),2);Ut(we,{namespace:"creator",single:!0,get tags(){return f(v)},set tags(Re){C(v,Re,!0)}});var Qe=w(Oe,2);Qe.__click=[Fo,s,c,v];var ce=w(Qe,2);ce.__click=[Io,s],I(m,T)};pe(be,m=>{f(s)&&m(xe)})}ee(()=>Ie(S,f(i).title)),Ei(y,()=>f(i).category,m=>f(i).category=m),Kn(P,()=>f(i).visible,m=>f(i).visible=m),Fe(se,()=>f(i).created_date,m=>f(i).created_date=m),I(e,u),ze()}Ct(["click","change"]);li(Uo,{target:document.getElementById("app")});
