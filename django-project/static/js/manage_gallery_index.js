(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const $t=!1;var pt=Array.isArray,er=Array.prototype.indexOf,jt=Array.from,tr=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,nr=Object.getOwnPropertyDescriptors,gn=Object.prototype,rr=Array.prototype,Bt=Object.getPrototypeOf,en=Object.isExtensible;function ir(e){return typeof(e==null?void 0:e.then)=="function"}function mn(e){for(var t=0;t<e.length;t++)e[t]()}const re=2,yn=4,ht=8,Vt=16,ue=32,De=64,it=128,J=256,ot=512,G=1024,fe=2048,Ie=4096,le=8192,gt=16384,or=32768,Ht=65536,ar=1<<19,wn=1<<20,Pt=1<<21,Ee=Symbol("$state"),sr=Symbol("legacy props"),lr=Symbol("");function bn(e){return e===this.v}function ur(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Wt(e){return!ur(e,this.v)}function fr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function cr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function dr(e){throw new Error("https://svelte.dev/e/effect_orphan")}function vr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function _r(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function pr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function gr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let mr=!1;const Xt=1,Yt=2,En=4,yr=8,wr=16,br=1,Er=4,kr=8,Tr=16,Cr=1,Sr=2,M=Symbol(),xr="http://www.w3.org/1999/xhtml",Or=[];function Rr(e,t=!1){return tt(e,new Map,"",Or)}function tt(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(pt(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var s=0;s<e.length;s+=1){var f=e[s];s in e&&(a[s]=tt(f,t,n,r))}return a}if(Bt(e)===gn){a={},t.set(e,a),i!==null&&t.set(i,a);for(var l in e)a[l]=tt(e[l],t,n,r);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return tt(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function Nr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let V=null;function at(e){V=e}function Xe(e,t=!1,n){var r=V={p:V,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Ln(()=>{r.d=!0})}function Ye(e){const t=V;if(t!==null){const a=t.e;if(a!==null){var n=L,r=O;t.e=null;try{for(var i=0;i<a.length;i++){var o=a[i];ie(o.effect),Z(o.reaction),ze(o.fn)}}finally{ie(n),Z(r)}}V=t.p,t.m=!0}return{}}function kn(){return!0}function z(e,t){if(typeof e!="object"||e===null||Ee in e)return e;const n=Bt(e);if(n!==gn&&n!==rr)return e;var r=new Map,i=pt(e),o=P(0),a=O,s=f=>{var l=O;Z(a);var d;return d=f(),Z(l),d};return i&&r.set("length",P(e.length)),new Proxy(e,{defineProperty(f,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&pr();var v=r.get(l);return v===void 0?(v=s(()=>P(d.value)),r.set(l,v)):S(v,s(()=>z(d.value))),!0},deleteProperty(f,l){var d=r.get(l);if(d===void 0)l in f&&r.set(l,s(()=>P(M)));else{if(i&&typeof l=="string"){var v=r.get("length"),u=Number(l);Number.isInteger(u)&&u<v.v&&S(v,u)}S(d,M),tn(o)}return!0},get(f,l,d){var p;if(l===Ee)return e;var v=r.get(l),u=l in f;if(v===void 0&&(!u||(p=Ne(f,l))!=null&&p.writable)&&(v=s(()=>P(z(u?f[l]:M))),r.set(l,v)),v!==void 0){var _=c(v);return _===M?void 0:_}return Reflect.get(f,l,d)},getOwnPropertyDescriptor(f,l){var d=Reflect.getOwnPropertyDescriptor(f,l);if(d&&"value"in d){var v=r.get(l);v&&(d.value=c(v))}else if(d===void 0){var u=r.get(l),_=u==null?void 0:u.v;if(u!==void 0&&_!==M)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return d},has(f,l){var _;if(l===Ee)return!0;var d=r.get(l),v=d!==void 0&&d.v!==M||Reflect.has(f,l);if(d!==void 0||L!==null&&(!v||(_=Ne(f,l))!=null&&_.writable)){d===void 0&&(d=s(()=>P(v?z(f[l]):M)),r.set(l,d));var u=c(d);if(u===M)return!1}return v},set(f,l,d,v){var C;var u=r.get(l),_=l in f;if(i&&l==="length")for(var p=d;p<u.v;p+=1){var x=r.get(p+"");x!==void 0?S(x,M):p in f&&(x=s(()=>P(M)),r.set(p+"",x))}u===void 0?(!_||(C=Ne(f,l))!=null&&C.writable)&&(u=s(()=>P(void 0)),S(u,s(()=>z(d))),r.set(l,u)):(_=u.v!==M,S(u,s(()=>z(d))));var g=Reflect.getOwnPropertyDescriptor(f,l);if(g!=null&&g.set&&g.set.call(v,d),!_){if(i&&typeof l=="string"){var m=r.get("length"),w=Number(l);Number.isInteger(w)&&w>=m.v&&S(m,w+1)}tn(o)}return!0},ownKeys(f){c(o);var l=Reflect.ownKeys(f).filter(u=>{var _=r.get(u);return _===void 0||_.v!==M});for(var[d,v]of r)v.v!==M&&!(d in f)&&l.push(d);return l},setPrototypeOf(){hr()}})}function tn(e,t=1){S(e,e.v+t)}function nn(e){try{if(e!==null&&typeof e=="object"&&Ee in e)return e[Ee]}catch{}return e}function Fr(e,t){return Object.is(nn(e),nn(t))}const He=new Map;function Le(e,t){var n={f:0,v:e,reactions:null,equals:bn,rv:0,wv:0};return n}function P(e,t){const n=Le(e);return Un(n),n}function Tn(e,t=!1){const n=Le(e);return t||(n.equals=Wt),n}function S(e,t,n=!1){O!==null&&!ne&&kn()&&(O.f&(re|Vt))!==0&&!(H!=null&&H.includes(e))&&gr();let r=n?z(t):t;return Fe(e,r)}function Fe(e,t){if(!e.equals(t)){var n=e.v;Ge?He.set(e,t):He.set(e,n),e.v=t,e.wv=Bn(),Cn(e,fe),L!==null&&(L.f&G)!==0&&(L.f&(ue|De))===0&&(K===null?Xr([e]):K.push(e))}return t}function Cn(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var o=n[i],a=o.f;(a&fe)===0&&(oe(o,t),(a&(G|J))!==0&&((a&re)!==0?Cn(o,Ie):kt(o)))}}let Lr=!1;var rn,Sn,xn,On;function Ar(){if(rn===void 0){rn=window,Sn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;xn=Ne(t,"firstChild").get,On=Ne(t,"nextSibling").get,en(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),en(n)&&(n.__t=void 0)}}function zt(e=""){return document.createTextNode(e)}function st(e){return xn.call(e)}function mt(e){return On.call(e)}function E(e,t){return st(e)}function Rn(e,t){{var n=st(e);return n instanceof Comment&&n.data===""?mt(n):n}}function b(e,t=1,n=!1){let r=e;for(;t--;)r=mt(r);return r}function Pr(e){e.textContent=""}function yt(e){var t=re|fe,n=O!==null&&(O.f&re)!==0?O:null;return L===null||n!==null&&(n.f&J)!==0?t|=J:L.f|=wn,{ctx:V,deps:null,effects:null,equals:bn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??L}}function Gt(e){const t=yt(e);return Un(t),t}function Dr(e){const t=yt(e);return t.equals=Wt,t}function Nn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ye(t[n])}}function Ir(e){for(var t=e.parent;t!==null;){if((t.f&re)===0)return t;t=t.parent}return null}function qr(e){var t,n=L;ie(Ir(e));try{Nn(e),t=Hn(e)}finally{ie(n)}return t}function Fn(e){var t=qr(e),n=(ge||(e.f&J)!==0)&&e.deps!==null?Ie:G;oe(e,n),e.equals(t)||(e.v=t,e.wv=Bn())}function Mr(e){L===null&&O===null&&dr(),O!==null&&(O.f&J)!==0&&L===null&&cr(),Ge&&fr()}function Ur(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function qe(e,t,n,r=!0){var i=L,o={ctx:V,deps:null,nodes_start:null,nodes_end:null,f:e|fe,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{Zt(o),o.f|=or}catch(f){throw ye(o),f}else t!==null&&kt(o);var a=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(wn|it))===0;if(!a&&r&&(i!==null&&Ur(o,i),O!==null&&(O.f&re)!==0)){var s=O;(s.effects??(s.effects=[])).push(o)}return o}function Ln(e){const t=qe(ht,null,!1);return oe(t,G),t.teardown=e,t}function jr(e){Mr();var t=L!==null&&(L.f&ue)!==0&&V!==null&&!V.m;if(t){var n=V;(n.e??(n.e=[])).push({fn:e,effect:L,reaction:O})}else{var r=ze(e);return r}}function Br(e){const t=qe(De,e,!0);return(n={})=>new Promise(r=>{n.outro?ke(t,()=>{ye(t),r(void 0)}):(ye(t),r(void 0))})}function ze(e){return qe(yn,e,!1)}function Kt(e){return qe(ht,e,!0)}function ee(e,t=[],n=yt){const r=t.map(n);return wt(()=>e(...r.map(c)))}function wt(e,t=0){return qe(ht|Vt|t,e,!0)}function me(e,t=!0){return qe(ht|ue,e,!0,t)}function An(e){var t=e.teardown;if(t!==null){const n=Ge,r=O;an(!0),Z(null);try{t.call(null)}finally{an(n),Z(r)}}}function Pn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&De)!==0?n.parent=null:ye(n,t),n=r}}function Vr(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ue)===0&&ye(t),t=n}}function ye(e,t=!0){var n=!1;if((t||(e.f&ar)!==0)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var o=r===i?null:mt(r);r.remove(),r=o}n=!0}Pn(e,t&&!n),ct(e,0),oe(e,gt);var a=e.transitions;if(a!==null)for(const f of a)f.stop();An(e);var s=e.parent;s!==null&&s.first!==null&&Dn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Dn(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function ke(e,t){var n=[];Jt(e,n,!0),In(n,()=>{ye(e),t&&t()})}function In(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Jt(e,t,n){if((e.f&le)===0){if(e.f^=le,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&Ht)!==0||(r.f&ue)!==0;Jt(r,t,o?n:!1),r=i}}}function Te(e){qn(e,!0)}function qn(e,t){if((e.f&le)!==0){e.f^=le,(e.f&G)===0&&(e.f^=G),Ke(e)&&(oe(e,fe),kt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Ht)!==0||(n.f&ue)!==0;qn(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let We=[],Dt=[];function Mn(){var e=We;We=[],mn(e)}function Hr(){var e=Dt;Dt=[],mn(e)}function bt(e){We.length===0&&queueMicrotask(Mn),We.push(e)}function on(){We.length>0&&Mn(),Dt.length>0&&Hr()}let nt=!1,lt=!1,ut=null,Ce=!1,Ge=!1;function an(e){Ge=e}let Be=[];let O=null,ne=!1;function Z(e){O=e}let L=null;function ie(e){L=e}let H=null;function Wr(e){H=e}function Un(e){O!==null&&O.f&Pt&&(H===null?Wr([e]):H.push(e))}let B=null,Y=0,K=null;function Xr(e){K=e}let jn=1,ft=0,ge=!1;function Bn(){return++jn}function Ke(e){var v;var t=e.f;if((t&fe)!==0)return!0;if((t&Ie)!==0){var n=e.deps,r=(t&J)!==0;if(n!==null){var i,o,a=(t&ot)!==0,s=r&&L!==null&&!ge,f=n.length;if(a||s){var l=e,d=l.parent;for(i=0;i<f;i++)o=n[i],(a||!((v=o==null?void 0:o.reactions)!=null&&v.includes(l)))&&(o.reactions??(o.reactions=[])).push(l);a&&(l.f^=ot),s&&d!==null&&(d.f&J)===0&&(l.f^=J)}for(i=0;i<f;i++)if(o=n[i],Ke(o)&&Fn(o),o.wv>e.wv)return!0}(!r||L!==null&&!ge)&&oe(e,G)}return!1}function Yr(e,t){for(var n=t;n!==null;){if((n.f&it)!==0)try{n.fn(e);return}catch{n.f^=it}n=n.parent}throw nt=!1,e}function zr(e){return(e.f&gt)===0&&(e.parent===null||(e.parent.f&it)===0)}function Et(e,t,n,r){if(nt){if(n===null&&(nt=!1),zr(t))throw e;return}n!==null&&(nt=!0);{Yr(e,t);return}}function Vn(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];H!=null&&H.includes(e)||((o.f&re)!==0?Vn(o,t,!1):t===o&&(n?oe(o,fe):(o.f&G)!==0&&oe(o,Ie),kt(o)))}}function Hn(e){var _;var t=B,n=Y,r=K,i=O,o=ge,a=H,s=V,f=ne,l=e.f;B=null,Y=0,K=null,ge=(l&J)!==0&&(ne||!Ce||O===null),O=(l&(ue|De))===0?e:null,H=null,at(e.ctx),ne=!1,ft++,e.f|=Pt;try{var d=(0,e.fn)(),v=e.deps;if(B!==null){var u;if(ct(e,Y),v!==null&&Y>0)for(v.length=Y+B.length,u=0;u<B.length;u++)v[Y+u]=B[u];else e.deps=v=B;if(!ge)for(u=Y;u<v.length;u++)((_=v[u]).reactions??(_.reactions=[])).push(e)}else v!==null&&Y<v.length&&(ct(e,Y),v.length=Y);if(kn()&&K!==null&&!ne&&v!==null&&(e.f&(re|Ie|fe))===0)for(u=0;u<K.length;u++)Vn(K[u],e);return i!==null&&(ft++,K!==null&&(r===null?r=K:r.push(...K))),d}finally{B=t,Y=n,K=r,O=i,ge=o,H=a,at(s),ne=f,e.f^=Pt}}function Gr(e,t){let n=t.reactions;if(n!==null){var r=er.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&re)!==0&&(B===null||!B.includes(t))&&(oe(t,Ie),(t.f&(J|ot))===0&&(t.f^=ot),Nn(t),ct(t,0))}function ct(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Gr(e,n[r])}function Zt(e){var t=e.f;if((t&gt)===0){oe(e,G);var n=L,r=V,i=Ce;L=e,Ce=!0;try{(t&Vt)!==0?Vr(e):Pn(e),An(e);var o=Hn(e);e.teardown=typeof o=="function"?o:null,e.wv=jn;var a=e.deps,s;$t&&mr&&e.f&fe}catch(f){Et(f,e,n,r||e.ctx)}finally{Ce=i,L=n}}}function Kr(){try{vr()}catch(e){if(ut!==null)Et(e,ut,null);else throw e}}function Wn(){var e=Ce;try{var t=0;for(Ce=!0;Be.length>0;){t++>1e3&&Kr();var n=Be,r=n.length;Be=[];for(var i=0;i<r;i++){var o=Zr(n[i]);Jr(o)}}}finally{lt=!1,Ce=e,ut=null,He.clear()}}function Jr(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(gt|le))===0)try{Ke(r)&&(Zt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Dn(r):r.fn=null))}catch(i){Et(i,r,null,r.ctx)}}}function kt(e){lt||(lt=!0,queueMicrotask(Wn));for(var t=ut=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(De|ue))!==0){if((n&G)===0)return;t.f^=G}}Be.push(t)}function Zr(e){for(var t=[],n=e;n!==null;){var r=n.f,i=(r&(ue|De))!==0,o=i&&(r&G)!==0;if(!o&&(r&le)===0){if((r&yn)!==0)t.push(n);else if(i)n.f^=G;else{var a=O;try{O=n,Ke(n)&&Zt(n)}catch(l){Et(l,n,null,n.ctx)}finally{O=a}}var s=n.first;if(s!==null){n=s;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}return t}function Qr(e){var t;for(on();Be.length>0;)lt=!0,Wn(),on();return t}function c(e){var t=e.f,n=(t&re)!==0;if(O!==null&&!ne){if(!(H!=null&&H.includes(e))){var r=O.deps;e.rv<ft&&(e.rv=ft,B===null&&r!==null&&r[Y]===e?Y++:B===null?B=[e]:(!ge||!B.includes(e))&&B.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,o=i.parent;o!==null&&(o.f&J)===0&&(i.f^=J)}return n&&(i=e,Ke(i)&&Fn(i)),Ge&&He.has(e)?He.get(e):e.v}function Ae(e){var t=ne;try{return ne=!0,e()}finally{ne=t}}const $r=-7169;function oe(e,t){e.f=e.f&$r|t}const ei=["touchstart","touchmove"];function ti(e){return ei.includes(e)}let sn=!1;function ni(){sn||(sn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Xn(e){var t=O,n=L;Z(null),ie(null);try{return e()}finally{Z(t),ie(n)}}function Qt(e,t,n,r=n){e.addEventListener(t,()=>Xn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),ni()}const Yn=new Set,It=new Set;function ri(e,t,n,r={}){function i(o){if(r.capture||je.call(t,o),!o.cancelBubble)return Xn(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?bt(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function ii(e,t,n,r,i){var o={capture:r,passive:i},a=ri(e,t,n,o);(t===document.body||t===window||t===document)&&Ln(()=>{t.removeEventListener(e,a,o)})}function Tt(e){for(var t=0;t<e.length;t++)Yn.add(e[t]);for(var n of It)n(e)}function je(e){var w;var t=this,n=t.ownerDocument,r=e.type,i=((w=e.composedPath)==null?void 0:w.call(e))||[],o=i[0]||e.target,a=0,s=e.__root;if(s){var f=i.indexOf(s);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var l=i.indexOf(t);if(l===-1)return;f<=l&&(a=f)}if(o=i[a]||e.target,o!==t){tr(e,"currentTarget",{configurable:!0,get(){return o||n}});var d=O,v=L;Z(null),ie(null);try{for(var u,_=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var x=o["__"+r];if(x!=null&&(!o.disabled||e.target===o))if(pt(x)){var[g,...m]=x;g.apply(o,[e,...m])}else x.call(o,e)}catch(C){u?_.push(C):u=C}if(e.cancelBubble||p===t||p===null)break;o=p}if(u){for(let C of _)queueMicrotask(()=>{throw C});throw u}}finally{e.__root=t,delete e.currentTarget,Z(d),ie(v)}}}function oi(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function qt(e,t){var n=L;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function q(e,t){var n=(t&Cr)!==0,r=(t&Sr)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=oi(o?e:"<!>"+e),n||(i=st(i)));var a=r||Sn?document.importNode(i,!0):i.cloneNode(!0);if(n){var s=st(a),f=a.lastChild;qt(s,f)}else qt(a,a);return a}}function ai(){var e=document.createDocumentFragment(),t=document.createComment(""),n=zt();return e.append(t,n),qt(t,n),e}function I(e,t){e!==null&&e.before(t)}function Pe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function si(e,t){return li(e,t)}const Oe=new Map;function li(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:a=!0}){Ar();var s=new Set,f=v=>{for(var u=0;u<v.length;u++){var _=v[u];if(!s.has(_)){s.add(_);var p=ti(_);t.addEventListener(_,je,{passive:p});var x=Oe.get(_);x===void 0?(document.addEventListener(_,je,{passive:p}),Oe.set(_,1)):Oe.set(_,x+1)}}};f(jt(Yn)),It.add(f);var l=void 0,d=Br(()=>{var v=n??t.appendChild(zt());return me(()=>{if(o){Xe({});var u=V;u.c=o}i&&(r.$$events=i),l=e(v,r)||{},o&&Ye()}),()=>{var p;for(var u of s){t.removeEventListener(u,je);var _=Oe.get(u);--_===0?(document.removeEventListener(u,je),Oe.delete(u)):Oe.set(u,_)}It.delete(f),v!==n&&((p=v.parentNode)==null||p.removeChild(v))}});return ui.set(l,d),l}let ui=new WeakMap;const Rt=0,Qe=1,Nt=2;function fi(e,t,n,r,i){var o=e,a=V,s=M,f,l,d,v=Le(void 0),u=Le(void 0),_=!1;function p(g,m){_=!0,m&&(ie(x),Z(x),at(a));try{g===Rt&&n&&(f?Te(f):f=me(()=>n(o))),g===Qe&&r&&(l?Te(l):l=me(()=>r(o,v))),g===Nt&&i&&(d?Te(d):d=me(()=>i(o,u))),g!==Rt&&f&&ke(f,()=>f=null),g!==Qe&&l&&ke(l,()=>l=null),g!==Nt&&d&&ke(d,()=>d=null)}finally{m&&(at(null),Z(null),ie(null),Qr())}}var x=wt(()=>{if(s!==(s=t())){if(ir(s)){var g=s;_=!1,g.then(m=>{g===s&&(Fe(v,m),p(Qe,!0))},m=>{if(g===s&&(Fe(u,m),p(Nt,!0),!i))throw u.v}),bt(()=>{_||p(Rt,!0)})}else Fe(v,s),p(Qe,!1);return()=>s=M}})}function he(e,t,[n,r]=[0,0]){var i=e,o=null,a=null,s=M,f=n>0?Ht:0,l=!1;const d=(u,_=!0)=>{l=!0,v(_,u)},v=(u,_)=>{s!==(s=u)&&(s?(o?Te(o):_&&(o=me(()=>_(i))),a&&ke(a,()=>{a=null})):(a?Te(a):_&&(a=me(()=>_(i,[n+1,r]))),o&&ke(o,()=>{o=null})))};wt(()=>{l=!1,t(d),l||v(null,null)},f)}function dt(e,t){return t}function ci(e,t,n,r){for(var i=[],o=t.length,a=0;a<o;a++)Jt(t[a].e,i,!0);var s=o>0&&i.length===0&&n!==null;if(s){var f=n.parentNode;Pr(f),f.append(n),r.clear(),pe(e,t[0].prev,t[o-1].next)}In(i,()=>{for(var l=0;l<o;l++){var d=t[l];s||(r.delete(d.k),pe(e,d.prev,d.next)),ye(d.e,!s)}})}function vt(e,t,n,r,i,o=null){var a=e,s={flags:t,items:new Map,first:null},f=(t&En)!==0;if(f){var l=e;a=l.appendChild(zt())}var d=null,v=!1,u=Dr(()=>{var _=n();return pt(_)?_:_==null?[]:jt(_)});wt(()=>{var _=c(u),p=_.length;v&&p===0||(v=p===0,di(_,s,a,i,t,r,n),o!==null&&(p===0?d?Te(d):d=me(()=>o(a)):d!==null&&ke(d,()=>{d=null})),c(u))})}function di(e,t,n,r,i,o,a){var we,Se,h,k;var s=(i&yr)!==0,f=(i&(Xt|Yt))!==0,l=e.length,d=t.items,v=t.first,u=v,_,p=null,x,g=[],m=[],w,C,y,T;if(s)for(T=0;T<l;T+=1)w=e[T],C=o(w,T),y=d.get(C),y!==void 0&&((we=y.a)==null||we.measure(),(x??(x=new Set)).add(y));for(T=0;T<l;T+=1){if(w=e[T],C=o(w,T),y=d.get(C),y===void 0){var F=u?u.e.nodes_start:n;p=_i(F,t,p,p===null?t.first:p.next,w,C,T,r,i,a),d.set(C,p),g=[],m=[],u=p.next;continue}if(f&&vi(y,w,T,i),(y.e.f&le)!==0&&(Te(y.e),s&&((Se=y.a)==null||Se.unfix(),(x??(x=new Set)).delete(y))),y!==u){if(_!==void 0&&_.has(y)){if(g.length<m.length){var A=m[0],D;p=A.prev;var se=g[0],X=g[g.length-1];for(D=0;D<g.length;D+=1)ln(g[D],A,n);for(D=0;D<m.length;D+=1)_.delete(m[D]);pe(t,se.prev,X.next),pe(t,p,se),pe(t,X,A),u=A,p=X,T-=1,g=[],m=[]}else _.delete(y),ln(y,u,n),pe(t,y.prev,y.next),pe(t,y,p===null?t.first:p.next),pe(t,p,y),p=y;continue}for(g=[],m=[];u!==null&&u.k!==C;)(u.e.f&le)===0&&(_??(_=new Set)).add(u),m.push(u),u=u.next;if(u===null)continue;y=u}g.push(y),p=y,u=y.next}if(u!==null||_!==void 0){for(var W=_===void 0?[]:jt(_);u!==null;)(u.e.f&le)===0&&W.push(u),u=u.next;var Q=W.length;if(Q>0){var Me=(i&En)!==0&&l===0?n:null;if(s){for(T=0;T<Q;T+=1)(h=W[T].a)==null||h.measure();for(T=0;T<Q;T+=1)(k=W[T].a)==null||k.fix()}ci(t,W,Me,d)}}s&&bt(()=>{var R;if(x!==void 0)for(y of x)(R=y.a)==null||R.apply()}),L.first=t.first&&t.first.e,L.last=p&&p.e}function vi(e,t,n,r){(r&Xt)!==0&&Fe(e.v,t),(r&Yt)!==0?Fe(e.i,n):e.i=n}function _i(e,t,n,r,i,o,a,s,f,l){var d=(f&Xt)!==0,v=(f&wr)===0,u=d?v?Tn(i):Le(i):i,_=(f&Yt)===0?a:Le(a),p={i:_,v:u,k:o,a:null,e:null,prev:n,next:r};try{return p.e=me(()=>s(e,u,_,l),Lr),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function ln(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var a=mt(o);i.before(o),o=a}}function pe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function zn(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=zn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function pi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=zn(e))&&(r&&(r+=" "),r+=t);return r}function un(e){return typeof e=="object"?pi(e):e??""}function hi(e,t,n){var r=e==null?"":""+e;return t&&(r=r?r+" "+t:t),r===""?null:r}function fn(e,t,n,r,i,o){var a=e.__className;if(a!==n||a===void 0){var s=hi(n,r);s==null?e.removeAttribute("class"):e.className=s,e.__className=n}return o}const gi=Symbol("is custom element"),mi=Symbol("is html");function _e(e,t,n,r){var i=yi(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[lr]=n),n==null?e.removeAttribute(t):typeof n!="string"&&wi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function yi(e){return e.__attributes??(e.__attributes={[gi]:e.nodeName.includes("-"),[mi]:e.namespaceURI===xr})}var cn=new Map;function wi(e){var t=cn.get(e.nodeName);if(t)return t;cn.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=nr(r);for(var o in n)n[o].set&&t.push(o);r=Bt(r)}return t}function Re(e,t,n=t){Qt(e,"input",r=>{var i=r?e.defaultValue:e.value;if(i=Ft(e)?Lt(i):i,n(i),i!==(i=t())){var o=e.selectionStart,a=e.selectionEnd;e.value=i??"",a!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(a,e.value.length))}}),Ae(t)==null&&e.value&&n(Ft(e)?Lt(e.value):e.value),Kt(()=>{var r=t();Ft(e)&&r===Lt(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Gn(e,t,n=t){Qt(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),Ae(t)==null&&n(e.checked),Kt(()=>{var r=t();e.checked=!!r})}function Ft(e){var t=e.type;return t==="number"||t==="range"}function Lt(e){return e===""?null:+e}function Kn(e,t,n){if(e.multiple)return ki(e,t);for(var r of e.options){var i=Ve(r);if(Fr(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function bi(e,t){ze(()=>{var n=new MutationObserver(()=>{var r=e.__value;Kn(e,r)});return n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function Ei(e,t,n=t){var r=!0;Qt(e,"change",i=>{var o=i?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(o),Ve);else{var s=e.querySelector(o)??e.querySelector("option:not([disabled])");a=s&&Ve(s)}n(a)}),ze(()=>{var i=t();if(Kn(e,i,r),r&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Ve(o),n(i))}e.__value=i,r=!1}),bi(e)}function ki(e,t){for(var n of e.options)n.selected=~t.indexOf(Ve(n))}function Ve(e){return"__value"in e?e.__value:e.value}function dn(e,t){return e===t||(e==null?void 0:e[Ee])===t}function Ti(e={},t,n,r){return ze(()=>{var i,o;return Kt(()=>{i=o,o=[],Ae(()=>{e!==n(...o)&&(t(e,...o),i&&dn(n(...i),e)&&t(null,...i))})}),()=>{bt(()=>{o&&dn(n(...o),e)&&t(null,...o)})}}),e}let $e=!1;function Ci(e){var t=$e;try{return $e=!1,[e(),$e]}finally{$e=t}}function vn(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function _t(e,t,n,r){var T;var i=(n&br)!==0,o=!0,a=(n&kr)!==0,s=(n&Tr)!==0,f=!1,l;a?[l,f]=Ci(()=>e[t]):l=e[t];var d=Ee in e||sr in e,v=a&&(((T=Ne(e,t))==null?void 0:T.set)??(d&&t in e&&(F=>e[t]=F)))||void 0,u=r,_=!0,p=!1,x=()=>(p=!0,_&&(_=!1,s?u=Ae(r):u=r),u);l===void 0&&r!==void 0&&(v&&o&&_r(),l=x(),v&&v(l));var g;if(g=()=>{var F=e[t];return F===void 0?x():(_=!0,p=!1,F)},(n&Er)===0)return g;if(v){var m=e.$$legacy;return function(F,A){return arguments.length>0?((!A||m||f)&&v(A?g():F),F):g()}}var w=!1,C=Tn(l),y=yt(()=>{var F=g(),A=c(C);return w?(w=!1,A):C.v=F});return a&&c(y),i||(y.equals=Wt),function(F,A){if(arguments.length>0){const D=A?c(y):a?z(F):F;if(!y.equals(D)){if(w=!0,S(C,D),p&&u!==void 0&&(u=D),vn(y))return F;Ae(()=>c(y))}return F}return vn(y)?y.v:c(y)}}function Si(e){V===null&&Nr(),jr(()=>{const t=Ae(e);if(typeof t=="function")return t})}const xi="5";var hn;typeof window<"u"&&((hn=window.__svelte??(window.__svelte={})).v??(hn.v=new Set)).add(xi);function Oi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rt={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */var Ri=rt.exports,_n;function Ni(){return _n||(_n=1,function(e){(function(t,n){e.exports?e.exports=n():t.Toastify=n()})(Ri,function(t){var n=function(a){return new n.lib.init(a)},r="1.12.0";n.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},n.lib=n.prototype={toastify:r,constructor:n,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||n.defaults.text,this.options.node=a.node||n.defaults.node,this.options.duration=a.duration===0?0:a.duration||n.defaults.duration,this.options.selector=a.selector||n.defaults.selector,this.options.callback=a.callback||n.defaults.callback,this.options.destination=a.destination||n.defaults.destination,this.options.newWindow=a.newWindow||n.defaults.newWindow,this.options.close=a.close||n.defaults.close,this.options.gravity=a.gravity==="bottom"?"toastify-bottom":n.defaults.gravity,this.options.positionLeft=a.positionLeft||n.defaults.positionLeft,this.options.position=a.position||n.defaults.position,this.options.backgroundColor=a.backgroundColor||n.defaults.backgroundColor,this.options.avatar=a.avatar||n.defaults.avatar,this.options.className=a.className||n.defaults.className,this.options.stopOnFocus=a.stopOnFocus===void 0?n.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||n.defaults.onClick,this.options.offset=a.offset||n.defaults.offset,this.options.escapeMarkup=a.escapeMarkup!==void 0?a.escapeMarkup:n.defaults.escapeMarkup,this.options.ariaLive=a.ariaLive||n.defaults.ariaLive,this.options.style=a.style||n.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var s in this.options.style)a.style[s]=this.options.style[s];if(this.options.ariaLive&&a.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,this.options.avatar!==""){var f=document.createElement("img");f.src=this.options.avatar,f.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?a.appendChild(f):a.insertAdjacentElement("afterbegin",f)}if(this.options.close===!0){var l=document.createElement("button");l.type="button",l.setAttribute("aria-label","Close"),l.className="toast-close",l.innerHTML="&#10006;",l.addEventListener("click",(function(g){g.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var d=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&d>360?a.insertAdjacentElement("afterbegin",l):a.appendChild(l)}if(this.options.stopOnFocus&&this.options.duration>0){var v=this;a.addEventListener("mouseover",function(g){window.clearTimeout(a.timeOutValue)}),a.addEventListener("mouseleave",function(){a.timeOutValue=window.setTimeout(function(){v.removeElement(a)},v.options.duration)})}if(typeof this.options.destination<"u"&&a.addEventListener("click",(function(g){g.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&a.addEventListener("click",(function(g){g.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var u=i("x",this.options),_=i("y",this.options),p=this.options.position=="left"?u:"-"+u,x=this.options.gravity=="toastify-top"?_:"-"+_;a.style.transform="translate("+p+","+x+")"}return a},showToast:function(){this.toastElement=this.buildToast();var a;if(typeof this.options.selector=="string"?a=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?a=this.options.selector:a=document.body,!a)throw"Root element is not defined";var s=n.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,s),n.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),n.reposition()}).bind(this),400)}},n.reposition=function(){for(var a={top:15,bottom:15},s={top:15,bottom:15},f={top:15,bottom:15},l=document.getElementsByClassName("toastify"),d,v=0;v<l.length;v++){o(l[v],"toastify-top")===!0?d="toastify-top":d="toastify-bottom";var u=l[v].offsetHeight;d=d.substr(9,d.length-1);var _=15,p=window.innerWidth>0?window.innerWidth:screen.width;p<=360?(l[v].style[d]=f[d]+"px",f[d]+=u+_):o(l[v],"toastify-left")===!0?(l[v].style[d]=a[d]+"px",a[d]+=u+_):(l[v].style[d]=s[d]+"px",s[d]+=u+_)}return this};function i(a,s){return s.offset[a]?isNaN(s.offset[a])?s.offset[a]:s.offset[a]+"px":"0px"}function o(a,s){return!a||typeof s!="string"?!1:!!(a.className&&a.className.trim().split(/\s+/gi).indexOf(s)>-1)}return n.lib.init.prototype=n.lib,n})}(rt)),rt.exports}var Fi=Ni();const At=Oi(Fi);function te(e,t,n="info"){switch(n){case"info":At({text:e,duration:t}).showToast();break;case"warn":At({text:e,duration:-1,close:!0,style:{background:"gold"}}).showToast();case"error":At({text:e,duration:-1,close:!0,style:{background:"darkred"}}).showToast()}}function ae(e,t,n){t||(t="Success!"),n||(n="Failed"),e.status==200?te(t,4e3,"info"):te(`${n} (${e.statusText})`,4e3,"error")}/*! js-cookie v3.0.5 | MIT */function et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Li={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Mt(e,t){function n(i,o,a){if(!(typeof document>"u")){a=et({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var f in a)a[f]&&(s+="; "+f,a[f]!==!0&&(s+="="+a[f].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+s}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var f=o[s].split("="),l=f.slice(1).join("=");try{var d=decodeURIComponent(f[0]);if(a[d]=e.read(l,d),i===d)break}catch{}}return i?a[i]:a}}return Object.create({set:n,get:r,remove:function(i,o){n(i,"",et({},o,{expires:-1}))},withAttributes:function(i){return Mt(this.converter,et({},this.attributes,i))},withConverter:function(i){return Mt(et({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Ai=Mt(Li,{path:"/"});const Jn=["image/png","image/jpeg","image/webp","image/apng","image/avif","image/gif"],Zn=["video/mp4","video/webm","video/ogg"],U=Ai.get("csrftoken")||"";async function Pi(e){const t=new Request(`/objects/gallery/${e}/metadata`,{method:"GET",headers:{"X-CSRFToken":U}});return(await fetch(t).then()).json().then(n=>n)}async function Di(e){const t=new Request(`/objects/gallery/${e}/media`,{method:"GET",headers:{"X-CSRFToken":U}});return(await fetch(t).then()).json().then(n=>n)}async function Ii(){const e=new Request("/categories/json",{method:"GET",headers:{"X-CSRFToken":U}});return(await fetch(e).then()).json().then(t=>t)}function qi(){return new Promise(e=>{const t=document.createElement("input");t.type="file",t.accept=[...Jn,...Zn].join(", "),t.multiple=!0,t.addEventListener("change",async n=>{if(!n.target)return;const r=n.target.files;if(!r||r.length==0)return;let i=[];const o=Mi(r);Promise.allSettled(o).then(async a=>{for(let s of a.filter(f=>f.status=="fulfilled"))await Ui(s.value).then(f=>{f?(console.log("Uploaded",f),i.push(f),te(`Uploaded ${f.title}`,2e3)):te(`Failed to upload ${s.value.file.name}`,2e3)});console.log("resolved",i),e(i)})}),t.click()})}function Mi(e){let t=[];for(let n of e)Jn.includes(n.type)?t.push(new Promise((r,i)=>{const o=new FileReader;o.onload=()=>{const a=new Image;a.src=o.result,a.onload=()=>{r({file:n,height:a.height,width:a.width,type:n.type})}},o.onerror=()=>i(new Error("Failed to read file")),o.readAsDataURL(n)})):Zn.includes(n.type)&&t.push(new Promise((r,i)=>{const o=document.createElement("video"),a=URL.createObjectURL(n);o.onloadedmetadata=()=>{o.videoWidth,o.videoHeight,URL.revokeObjectURL(a),r({file:n,height:o.videoHeight,width:o.videoWidth,type:n.type})},o.onerror=()=>{URL.revokeObjectURL(a),i(new Error("Failed to read file"))},o.src=a}));return t}async function Ui(e){let t=new FormData;t.append("file",e.file),t.append("type",e.type),t.append("width",e.width.toString()),t.append("height",e.height.toString()),t.append("loop","false");let n=new Request("/create/media",{method:"POST",body:t,headers:{"X-CSRFToken":U}});return new Promise((r,i)=>{fetch(n).then(o=>{o.json().then(a=>{a.url&&a.uuid?(console.log("Created",a.url),r({uuid:a.uuid,url:a.url,type:e.type,title:"",description:"",uploaderDescription:"",loop:!1,creator_tags:[],discord_creator:"",discord_creator_tag:[],tags:[]})):i(new Error(`Failed to upload ${e.file.name}`))})})})}async function ji(e){let t=new FormData,n="";e.includes("youtu.be/")?n=e.split("/").pop():n=e.split("v=").pop(),t.append("url","https://www.youtube-nocookie.com/embed/"+n),t.append("type","embed"),t.append("width","1280"),t.append("height","720"),t.append("loop","false");let r=new Request("/create/mediaEmbed",{method:"POST",body:t,headers:{"X-CSRFToken":U}});return new Promise((i,o)=>{fetch(r).then(a=>{a.json().then(s=>{s.url&&s.uuid?(console.log("Created",s.url),i({uuid:s.uuid,url:s.url,type:"embed",title:"",description:"",uploaderDescription:"",loop:!1,creator_tags:[],discord_creator:"",discord_creator_tag:[],tags:[]})):o(new Error(`Failed to upload ${e}`))})})})}async function Bi(e){let t=new FormData;t.append("uuid",e.uuid),t.append("title",e.title),t.append("creator_tags",JSON.stringify(e.creator_tags)),t.append("tags",JSON.stringify(e.tags)),t.append("description",e.description),t.append("uploaderDescription",e.uploaderDescription),t.append("loop",e.loop.toString());let n=new Request("/modify/media",{method:"POST",body:t,headers:{"X-CSRFToken":U}});return fetch(n).then(r=>(ae(r,"Updated media!","Failed to update media"),r.status==200))}async function Vi(e,t){let n=new FormData;n.append("creator",e),n.append("tag",t);let r=new Request("/modify/creator",{method:"POST",body:n,headers:{"X-CSRFToken":U}});return fetch(r).then(i=>(ae(i,"Linked Discord creator!","Failed to link Discord creator"),i.status==200))}async function Hi(e){let t=new Request("/modify/media",{method:"DELETE",body:e,headers:{"X-CSRFToken":U}});return fetch(t).then(n=>(ae(n,"Deleted file","Failed to delete file"),n.status==200))}async function Wi(e){let t=new Request(`/objects/detach/${e}`,{method:"POST",headers:{"X-CSRFToken":U}});return fetch(t).then(n=>(ae(n,"Orphaned file","Failed to orphan file"),n.status==200))}async function Xi(e,t){let n=new Request(`/modify/gallery/${e}/visibility`,{method:"POST",body:t.toString(),headers:{"X-CSRFToken":U}});return fetch(n).then(r=>(ae(r,"Updated visibility!","Failed to update visibility"),r.status==200))}async function Yi(e,t){let n=new Request(`/modify/gallery/${e}/date`,{method:"POST",body:t,headers:{"X-CSRFToken":U}});return fetch(n).then(r=>(ae(r,"Updated date!","Failed to update date"),r.status==200))}async function Qn(e,t){let n=new Request(`/modify/gallery/${t}/associate_single_media`,{method:"POST",body:e,headers:{"X-CSRFToken":U}});return fetch(n).then(r=>(ae(r,"Linked media to gallery","Media link failed"),r.status==200))}async function zi(e,t){const n=e.map(i=>i.uuid);let r=new Request(`/modify/gallery/${t}/media`,{method:"POST",body:n.toString(),headers:{"X-CSRFToken":U}});return fetch(r).then(i=>(ae(i,"Updated gallery order!","Failed to update gallery order"),i.status==200))}async function Gi(e,t){let n=new Request(`/modify/gallery/${t}/title`,{method:"POST",body:e,headers:{"X-CSRFToken":U}});return fetch(n).then(r=>(ae(r,"Updated title!","Failed to update title"),r.status==200))}async function Ki(e,t){let n=new Request(`/modify/gallery/${t}/category`,{method:"POST",body:e,headers:{"X-CSRFToken":U}});return fetch(n).then(r=>(ae(r,"Updated category!","Failed to update category"),r.status==200),()=>!1)}async function pn(e,t){let n={incomplete_tag:e,namespace:t};console.log("test2");let r=new Request("/tags/autocomplete/",{method:"POST",body:JSON.stringify(n),headers:{"X-CSRFToken":U}});return fetch(r).then(i=>i.json()).then(i=>i.tags)}var Ji=(e,t,n)=>{t()(n.tag)},Zi=q('<div class="tag"><span class="tagLabel"> </span></div>');function $n(e,t){Xe(t,!0);let n=_t(t,"clicked",3,()=>{});var r=Zi();r.__click=[Ji,n,t];var i=E(r),o=E(i);ee(()=>{_e(r,"data-tag-namespace",t.tag.namespace),Pe(o,t.tag.tagname)}),I(e,r),Ye()}Tt(["click"]);function Qi(e,t){let n;return function(){clearTimeout(n),n=setTimeout(()=>e(),t)}}function $i(e,t,n,r,i,o,a){if(e.key==="Enter"&&(e.preventDefault(),c(t).length>0))if(n()===""&&c(t).includes(":")){const[s,f]=c(t).split(":");r({tagname:f,namespace:s})}else r({tagname:c(t),namespace:n()});e.key==="Escape"&&i(),e.key==="Backspace"&&c(t).length===0&&o.tags.pop(),e.key==="Tab"&&(e.preventDefault(),c(a)&&c(a).then(s=>{s.length>0&&r(s[0])}))}var eo=e=>{e.stopPropagation()},to=q('<input type="text" name="creator_tags">'),no=(e,t,n)=>{t(c(n))},ro=q("<li> </li>"),io=q('<div class="autocompletePopup"><ul></ul></div>'),oo=q('<div class="autocompletePopup"><ul><li>Error fetching tag list</li></ul></div>'),ao=q("<span></span>"),so=q('<div class="tagInput"><div class="tag-wrapper"></div> <!> <!></div>');function Ut(e,t){Xe(t,!0);let n=_t(t,"namespace",3,""),r=_t(t,"single",3,!1),i=P("");function o(m){if(c(i).length===0)v();else if(n()===""&&c(i).includes(":")){const[w,C]=c(i).split(":");S(a,pn(C,w),!0)}else S(a,pn(c(i),n()),!0)}let a=P(void 0);const s=new Event("change",{bubbles:!0,cancelable:!0});let f;function l(m){t.tags.push(m),S(i,""),v(),f.dispatchEvent(s)}function d(m){t.tags.splice(t.tags.indexOf(m),1),f.dispatchEvent(s)}function v(){S(a,void 0)}var u=so(),_=E(u);vt(_,21,()=>t.tags,dt,(m,w)=>{$n(m,{get tag(){return c(w)},clicked:d})});var p=b(_,2);{var x=m=>{var w=to(),C=Gt(()=>Qi(o,250));w.__input=function(...y){var T;(T=c(C))==null||T.apply(this,y)},w.__keydown=[$i,i,n,l,v,t,a],w.__change=[eo],ii("blur",w,v),Re(w,()=>c(i),y=>S(i,y)),I(m,w)};he(p,m=>{r()&&t.tags.length>0||m(x)})}var g=b(p,2);fi(g,()=>c(a),m=>{var w=ao();I(m,w)},(m,w)=>{var C=ai(),y=Rn(C);{var T=F=>{var A=io(),D=E(A);vt(D,21,()=>c(w),dt,(se,X)=>{var W=ro();W.__click=[no,l,X];var Q=E(W);ee(()=>Pe(Q,`${c(X).namespace??""}:${c(X).tagname??""}`)),I(se,W)}),I(F,A)};he(y,F=>{c(w)&&c(w).length>0&&F(T)})}I(m,C)},(m,w)=>{var C=oo();I(m,C)}),Ti(u,m=>f=m,()=>f),I(e,u),Ye()}Tt(["input","keydown","change","click"]);function lo(e,t,n){S(t,!c(t)),c(t)?localStorage.setItem(`media_${n().uuid}_collapsed`,"true"):localStorage.removeItem(`media_${n().uuid}_collapsed`)}function uo(e,t,n,r){e.stopPropagation(),t.hooks.setIndex(n(),c(r))}function fo(e,t,n){S(t,"saving"),Bi(n()).then(r=>{r?S(t,"saved"):S(t,"changed")}).catch(r=>{console.error("Error saving media:",r),S(t,"changed")})}var co=(e,t,n)=>t.hooks.moveUp(n()),vo=(e,t,n)=>t.hooks.moveDown(n()),_o=q('<img loading="lazy">'),po=q('<video controls></video> <label><input type="checkbox" name="loop">Loop</label>',3),ho=q("<p>🔗 <a>Embed</a></p>"),go=q("<p>Unknown media type <a>File</a></p>"),mo=(e,t,n)=>t.hooks.delete(n()),yo=(e,t,n)=>t.hooks.orphan(n()),wo=q('<div class="previewOverlay"><img alt="" loading="lazy"></div>'),bo=(e,t,n)=>{t.hooks.editDiscord(n())},Eo=q('<div data-tag-namespace="creator"> </div>'),ko=q(`<div><div class="mediaHeader"><span class="counter"> </span> <button type="button" name="collapse" class="collapseButton"></button></div> <div class="moveButtons"><button type="button" name="up">⬆️</button> <input type="text" name="order" class="orderInput"> <button type="button" name="down">⬇️</button></div> <form><div class="imageContainer"><!> <button type="button" name="delete">Delete</button> <button type="button" name="orphan">Orphan</button> <!></div> <div class="dataContainer"><div><label for="title">Title</label> <input type="text" name="title" maxlength="256"></div> <div><label for="creator_tags">Creator(s)</label> <div class="creatorContainer"><!> <!></div></div> <div><label for="tags">Tags</label> <!></div> <div><label for="description">Creator's description</label> <textarea name="description"></textarea></div> <div><label for="uploaderDescription">Uploader's description</label> <textarea name="uploaderDescription"></textarea></div></div></form></div>`);function To(e,t){Xe(t,!0);let n=_t(t,"media",15),r=P(z(localStorage.getItem(`media_${n().uuid}_collapsed`)==="true"||!1)),i=Gt(()=>n().discord_creator_tag.length===0),o=P("saved"),a=P(z(t.index));var s=ko();s.__change=[fo,o,n];var f=E(s),l=E(f),d=E(l),v=b(l,2);v.__click=[lo,r,n];var u=b(f,2),_=E(u);_.__click=[co,t,n];var p=b(_,2);p.__change=[uo,t,n,a];var x=b(p,2);x.__click=[vo,t,n];var g=b(u,2),m=E(g),w=E(m);{var C=N=>{var j=_o();ee(()=>{_e(j,"src",n().url),_e(j,"alt",n().title)}),I(N,j)},y=(N,j)=>{{var ce=de=>{var Ze=po(),Ue=Rn(Ze),xt=b(Ue,2),ve=E(xt);ee(()=>{_e(Ue,"src",n().url),Ue.loop=n().loop}),Gn(ve,()=>n().loop,be=>n(n().loop=be,!0)),I(de,Ze)},St=(de,Ze)=>{{var Ue=ve=>{var be=ho(),Ot=b(E(be));ee(()=>_e(Ot,"href",n().url)),I(ve,be)},xt=ve=>{var be=go(),Ot=b(E(be));ee(()=>_e(Ot,"href",n().url)),I(ve,be)};he(de,ve=>{n().type==="embed"?ve(Ue):ve(xt,!1)},Ze)}};he(N,de=>{n().type.startsWith("video/")?de(ce):de(St,!1)},j)}};he(w,N=>{n().type.startsWith("image/")?N(C):N(y,!1)})}var T=b(w,2);T.__click=[mo,t,n];var F=b(T,2);F.__click=[yo,t,n];var A=b(F,2);{var D=N=>{var j=wo(),ce=E(j);ee(()=>_e(ce,"src",n().url)),I(N,j)};he(A,N=>{n().type.startsWith("image/")&&N(D)})}var se=b(m,2),X=E(se),W=b(E(X),2),Q=b(X,2),Me=b(E(Q),2),we=E(Me);{var Se=N=>{var j=Eo();j.__click=[bo,t,n];var ce=E(j);ee(()=>{fn(j,1,un(["discordCreator","tag",{discordUnlinked:c(i)}]),"svelte-1kbyb42"),Pe(ce,n().discord_creator)}),I(N,j)};he(we,N=>{n().discord_creator!==""&&N(Se)})}var h=b(we,2);Ut(h,{namespace:"creator",get tags(){return n().creator_tags},set tags(N){n(n().creator_tags=N,!0)}});var k=b(Q,2),R=b(E(k),2);Ut(R,{get tags(){return n().tags},set tags(N){n(n().tags=N,!0)}});var $=b(k,2),xe=b(E($),2),Je=b($,2),Ct=b(E(Je),2);ee(()=>{fn(s,1,un(["mediaElement",{collapsed:c(r)}])),_e(s,"data-status",c(o)),Pe(d,t.index)}),Re(p,()=>c(a),N=>S(a,N)),Re(W,()=>n().title,N=>n(n().title=N,!0)),Re(xe,()=>n().description,N=>n(n().description=N,!0)),Re(Ct,()=>n().uploaderDescription,N=>n(n().uploaderDescription=N,!0)),I(e,s),Ye()}Tt(["change","click"]);function Co(e,t){const n=prompt("Enter new title:",c(t).title);!n||n==c(t).title||Gi(n,c(t).id).then(r=>{r&&(c(t).title=n)})}function So(e,t,n){if(c(t).category==="new"){const r=prompt("Enter new category name:");r&&(c(n).push(r),c(t).category=r)}Ki(c(t).category,c(t).id)}function xo(e,t){Xi(c(t).id,c(t).visible).then(n=>{n||(c(t).visible=!c(t).visible)})}function Oo(e,t){Yi(c(t).id,c(t).created_date)}async function Ro(e,t,n){qi().then(r=>{console.log(r,r.length);for(const i of r)console.log(i),Qn(i.uuid,c(t).id).then(o=>{o?c(n).push(i):te(`Linking ${i.uuid} to gallery failed`,2e3,"warn")})})}async function No(e,t,n){const r=prompt("Enter YouTube URL:");r&&ji(r).then(i=>{i?Qn(i.uuid,c(t).id).then(o=>{o?c(n).push(i):te(`Linking ${i.uuid} to gallery failed`,2e3,"warn")}):te("Failed to add embed",2e3,"warn")})}function Fo(e,t,n,r){c(t)&&c(n)&&c(r).length>0&&Vi(c(t).discord_creator,c(r)[0].tagname).then(i=>{i&&c(n)&&(c(n).discord_creator_tag=[c(r)[0]],S(t,null),S(n,null),S(r,[],!0))})}var Lo=q("<option> </option>"),Ao=(e,t)=>{S(t,null)},Po=e=>{e.stopPropagation()},Do=(e,t)=>{S(t,null)},Io=q('<div id="discord-editor-overlay" class="svelte-dh18if"><div id="discord-editor" class="svelte-dh18if"><form action=""><fieldset><legend>Link Discord user tag</legend> <!> <div><label for="discord-description">Bound tag</label> <!></div></fieldset> <button type="button">Save</button> <button type="button">Cancel</button></form></div></div>'),qo=q('<main class="svelte-dh18if"><div id="title" class="svelte-dh18if"><h1> </h1> <button title="Edit title">✏️</button></div> <div id="gallery-controls" class="svelte-dh18if"><div><label for="category">Category:</label> <select id="category"><!><option>+ New Category</option></select></div> <div><label for="visible">Visible</label> <input type="checkbox" name="visible" id="visible"></div> <div><label for="gallery_date">Date</label> <input type="date" name="gallery_date" id="gallery-date"></div></div> <div id="list-container" class="svelte-dh18if"></div> <div id="galleryButtonContainer"><button id="addMedia" title="Add media">Add media</button> <button id="addEmbed" title="Add embed">Add embed</button></div> <!></main>');function Mo(e,t){Xe(t,!0);const n=window.location.pathname.split("/").pop(),r=parseInt(n||"0");let i=P(z({id:r,title:"",category:"",created_date:"1970-01-01",visible:!1})),o=P(z([])),a=P(z([]));Si(()=>{Pi(r).then(h=>{h&&S(i,h,!0)}).catch(h=>{te(`Error fetching gallery metadata: ${h}`)}),Di(r).then(h=>{h&&S(o,h,!0)}).catch(h=>{te(`Error fetching gallery media: ${h}`)}),Ii().then(h=>{h&&S(a,h,!0)}).catch(h=>{te(`Error fetching categories: ${h}`)})});function s(){zi(c(o),c(i).id)}const f={moveUp:h=>{const k=c(o).indexOf(h);k>0&&(R=>(c(o)[k]=R[0],c(o)[k-1]=R[1]))([c(o)[k-1],c(o)[k]]),s()},moveDown:h=>{const k=c(o).indexOf(h);k<c(o).length-1&&(R=>(c(o)[k]=R[0],c(o)[k+1]=R[1]))([c(o)[k+1],c(o)[k]]),s()},setIndex:(h,k)=>{const R=c(o).indexOf(h);if(R===k)return;let $=c(o).splice(R,1);c(o).splice(k,0,$[0]),te(`Set ${h.uuid} index to ${k}`),s()},delete:h=>{const k=c(o).indexOf(h);k>-1&&Hi(h.uuid).then(R=>{R&&(c(o).splice(k,1),c(o).length!==0&&s())})},orphan:h=>{const k=c(o).indexOf(h);k>-1&&Wi(h.uuid).then(R=>{R&&(c(o).splice(k,1),c(o).length!==0&&s())})},editDiscord:h=>{S(d,h,!0),S(l,Rr(h),!0),S(v,c(l).discord_creator_tag,!0)}};let l=P(null),d=P(null),v=P(z([]));var u=qo(),_=E(u),p=E(_),x=E(p),g=b(p,2);g.__click=[Co,i];var m=b(_,2),w=E(m),C=b(E(w),2);C.__change=[So,i,a];var y=E(C);vt(y,17,()=>c(a),dt,(h,k)=>{var R=Lo(),$={},xe=E(R);ee(()=>{$!==($=c(k))&&(R.value=(R.__value=c(k))==null?"":c(k)),Pe(xe,c(k))}),I(h,R)});var T=b(y);T.value=(T.__value="new")==null?"":"new";var F=b(w,2),A=b(E(F),2);A.__change=[xo,i];var D=b(F,2),se=b(E(D),2);se.__change=[Oo,i];var X=b(m,2);vt(X,21,()=>c(o),dt,(h,k,R)=>{To(h,{index:R,hooks:f,get media(){return c(o)[R]},set media($){c(o)[R]=$}})});var W=b(X,2),Q=E(W);Q.__click=[Ro,i,o];var Me=b(Q,2);Me.__click=[No,i,o];var we=b(W,2);{var Se=h=>{var k=Io();k.__click=[Ao,l];var R=E(k);R.__click=[Po];var $=E(R),xe=E($),Je=b(E(xe),2);const Ct=Gt(()=>({namespace:"creator",tagname:c(l).discord_creator}));$n(Je,{get tag(){return c(Ct)}});var N=b(Je,2),j=b(E(N),2);Ut(j,{namespace:"creator",single:!0,get tags(){return c(v)},set tags(de){S(v,de,!0)}});var ce=b(xe,2);ce.__click=[Fo,l,d,v];var St=b(ce,2);St.__click=[Do,l],I(h,k)};he(we,h=>{c(l)&&h(Se)})}ee(()=>Pe(x,c(i).title)),Ei(C,()=>c(i).category,h=>c(i).category=h),Gn(A,()=>c(i).visible,h=>c(i).visible=h),Re(se,()=>c(i).created_date,h=>c(i).created_date=h),I(e,u),Ye()}Tt(["click","change"]);si(Mo,{target:document.getElementById("app")});
